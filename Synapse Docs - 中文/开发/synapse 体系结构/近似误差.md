使用部分状态意味着授权检查可能会以几种不同的方式失败[^2]。

[^2]: 这是详尽无遗的吗？

- 我们可能会基于部分状态在检查5中错误地接受传入事件，而在基于完整状态时会被拒绝，反之亦然。
- 这意味着事件可能会错误地添加到房间的当前部分状态中，而在房间的完整状态中不会出现，反之亦然。
- 此外，我们可能跳过了基于完整状态的软失败。

（请注意，最后两个项目符号中描述的差异是用户可见的。）

这意味着在我们想要查找部分加入房间中的房间状态时必须非常小心。我们的状态近似可能不正确或缺失。但我们可以做出一些有根据的猜测。如果

- 我们的部分状态可能是正确的，或者
- 我们的部分状态不正确的后果很小，

那么我们就正常进行，并让重新同步过程修复任何错误（见下文）。

什么时候我们的部分状态可能是正确的？

- 越接近部分加入事件，它就越准确。（因此我们应该尽快完成重新同步。）
- 非成员事件：如果它们是当时房间状态的一部分，我们将在部分加入响应中收到它们。我们可能会因为缺乏远程成员信息而错误地接受或拒绝该状态的更新，因此这些状态可能会随着时间的推移而变得不正确。
- 本地成员的成员身份：我们是唯一可以为我们的用户创建加入和敲门事件的人。我们不能完全自信于其他主服务器的禁止、邀请和踢出是正确的，但重新同步过程应该会纠正任何错误。
- 远程成员的成员身份：我们没有在/send_join响应中收到这些信息，因此我们基本上不知道这些信息是否正确。

简而言之，我们认为信任非成员和本地成员事件的部分状态是可以接受的。对于远程成员事件，我们等待重新同步完成，此时我们拥有房间的完整状态，可以正常进行。