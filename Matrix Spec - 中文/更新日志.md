
# 更新日志

这是矩阵规范的**v1.11**版本。

## v1.11[](https://spec.matrix.org/v1.11/changelog/#v111)

|   |   |
|---|---|
|Git 提交|[https://github.com/matrix-org/matrix-spec/tree/v1.11](https://github.com/matrix-org/matrix-spec/tree/v1.11)|
|发布日期|2024年6月20日|

### 客户端-服务器 API[](https://spec.matrix.org/v1.11/changelog/#client-server-api)

**弃用**

- 根据[MSC4126](https://github.com/matrix-org/matrix-spec-proposals/issues/4126)，使用查询字符串进行身份验证现已弃用，应使用`Authorization`头。([#1808](https://github.com/matrix-org/matrix-spec/issues/1808))
- 使用`/_matrix/media/*`端点现已弃用，取而代之的是新的、经过身份验证的端点。([#1858](https://github.com/matrix-org/matrix-spec/issues/1858))

**新端点**

- [`GET /_matrix/client/v1/media/config`](https://spec.matrix.org/v1.11/client-server-api/#get_matrixclientv1mediaconfig) ([#1858](https://github.com/matrix-org/matrix-spec/issues/1858))
- [`GET /_matrix/client/v1/media/download/{serverName}/{mediaId}`](https://spec.matrix.org/v1.11/client-server-api/#get_matrixclientv1mediadownloadservernamemediaid) ([#1858](https://github.com/matrix-org/matrix-spec/issues/1858))
- [`GET /_matrix/client/v1/media/download/{serverName}/{mediaId}/{fileName}`](https://spec.matrix.org/v1.11/client-server-api/#get_matrixclientv1mediadownloadservernamemediaidfilename) ([#1858](https://github.com/matrix-org/matrix-spec/issues/1858))
- [`GET /_matrix/client/v1/media/preview_url`](https://spec.matrix.org/v1.11/client-server-api/#get_matrixclientv1mediapreview_url) ([#1858](https://github.com/matrix-org/matrix-spec/issues/1858))
- [`GET /_matrix/client/v1/media/thumbnail/{serverName}/{mediaId}`](https://spec.matrix.org/v1.11/client-server-api/#get_matrixclientv1mediathumbnailservernamemediaid) ([#1858](https://github.com/matrix-org/matrix-spec/issues/1858))

**向后兼容的更改**

- 根据[MSC3291](https://github.com/matrix-org/matrix-spec-proposals/pull/3291)，增加对VoIP通话中静音的支持。([#1755](https://github.com/matrix-org/matrix-spec/issues/1755))
- 根据[MSC2705](https://github.com/matrix-org/matrix-spec-proposals/pull/2705)，为`GET /thumbnail`增加可选的`animated`查询字符串选项。([#1757](https://github.com/matrix-org/matrix-spec/issues/1757))
- 根据[MSC1692](https://github.com/matrix-org/matrix-spec-proposals/pull/1692)，在注册时指定服务条款。([#1812](https://github.com/matrix-org/matrix-spec/issues/1812))
- 根据[MSC2191](https://github.com/matrix-org/matrix-spec-proposals/pull/2191)，增加对数学信息的支持。([#1816](https://github.com/matrix-org/matrix-spec/issues/1816))
- 根据[MSC3967](https://github.com/matrix-org/matrix-spec-proposals/pull/3967)，首次上传交叉签名密钥时不需要UIA。([#1828](https://github.com/matrix-org/matrix-spec/issues/1828))
- 根据[MSC4115](https://github.com/matrix-org/matrix-spec-proposals/pull/4115)，在事件中添加新的`unsigned.membership`属性。([#1847](https://github.com/matrix-org/matrix-spec/issues/1847))
- 根据[MSC3916](https://github.com/matrix-org/matrix-spec-proposals/pull/3916)，媒体下载和缩略图现在经过身份验证。([#1858](https://github.com/matrix-org/matrix-spec/issues/1858))
- 根据[MSC3916](https://github.com/matrix-org/matrix-spec-proposals/pull/3916)，一些媒体端点现在统一在`/_matrix/client/{version}/media/*`下，而不是`/_matrix/media/*`。([#1858](https://github.com/matrix-org/matrix-spec/issues/1858))

**规范澄清**

- 添加`/logout`并澄清不接受JSON请求体的端点。([#1644](https://github.com/matrix-org/matrix-spec/issues/1644))
- 澄清`POST /login`请求的`type`必须是`GET /login`响应返回的类型之一。([#1776](https://github.com/matrix-org/matrix-spec/issues/1776))
- 在类型中尽可能链接到现有语法。([#1813](https://github.com/matrix-org/matrix-spec/issues/1813))
- 将“恢复密钥”重命名为“备份解密密钥”。([#1819](https://github.com/matrix-org/matrix-spec/issues/1819))
- 澄清设备的Ed25519签名密钥应在二维码验证中使用（而不是设备的Curve25519身份密钥）。([#1829](https://github.com/matrix-org/matrix-spec/issues/1829))
- 修复规范中的各种拼写错误。([#1832](https://github.com/matrix-org/matrix-spec/issues/1832), [#1841](https://github.com/matrix-org/matrix-spec/issues/1841), [#1852](https://github.com/matrix-org/matrix-spec/issues/1852), [#1853](https://github.com/matrix-org/matrix-spec/issues/1853))
- 指定生成设备验证二维码时使用的编码。([#1839](https://github.com/matrix-org/matrix-spec/issues/1839))
- 澄清在`POST /account/password`和`POST /account/deactivate`端点上访问令牌是可选的。([#1843](https://github.com/matrix-org/matrix-spec/issues/1843))
- 更一致地使用RFC 2119关键字。([#1846](https://github.com/matrix-org/matrix-spec/issues/1846), [#1861](https://github.com/matrix-org/matrix-spec/issues/1861))
- 将用户、房间和事件ID的大小限制移至附录，并澄清长度以字节为单位测量。([#1850](https://github.com/matrix-org/matrix-spec/issues/1850))
- 澄清关系递归应限制在一定深度。([#1854](https://github.com/matrix-org/matrix-spec/issues/1854))
- 在功能配置文件表中添加缺失的秘密、第三方邀请和房间标记模块。([#1860](https://github.com/matrix-org/matrix-spec/issues/1860))
- 澄清何时使用服务器名称并链接到定义。([#1862](https://github.com/matrix-org/matrix-spec/issues/1862))
- 澄清检查`m.room.encrypted`事件时密钥所在的位置。([#1863](https://github.com/matrix-org/matrix-spec/issues/1863))
- 澄清`/media/v3/upload/{serverName}/{mediaId}`需要身份验证。([#1872](https://github.com/matrix-org/matrix-spec/issues/1872))

### 服务器-服务器 API[](https://spec.matrix.org/v1.11/changelog/#server-server-api)

**弃用**

- 使用客户端-服务器 API `/_matrix/media/*`端点现已弃用，取而代之的是新的、经过身份验证的端点。([#1858](https://github.com/matrix-org/matrix-spec/issues/1858))

**新端点**

- [`GET /_matrix/federation/v1/media/download/{mediaId}`](https://spec.matrix.org/v1.11/server-server-api/#get_matrixfederationv1mediadownloadmediaid) ([#1858](https://github.com/matrix-org/matrix-spec/issues/1858))
- [`GET /_matrix/federation/v1/media/thumbnail/{mediaId}`](https://spec.matrix.org/v1.11/server-server-api/#get_matrixfederationv1mediathumbnailmediaid) ([#1858](https://github.com/matrix-org/matrix-spec/issues/1858))

**向后兼容的更改**

- 根据[MSC3916](https://github.com/matrix-org/matrix-spec-proposals/pull/3916)，媒体下载和缩略图现在经过身份验证。([#1858](https://github.com/matrix-org/matrix-spec/issues/1858), [#1869](https://github.com/matrix-org/matrix-spec/issues/1869))

**规范澄清**

- 在类型中尽可能链接到现有语法。([#1813](https://github.com/matrix-org/matrix-spec/issues/1813))
- 澄清在`X-Matrix` `Authorization`头值参数列表中允许逗号周围的空格。([#1818](https://github.com/matrix-org/matrix-spec/issues/1818))
- 澄清`/v2/send_join`响应的`event`字段仅在事件由驻留服务器签名时才是必需的。([#1834](https://github.com/matrix-org/matrix-spec/issues/1834), [#1840](https://github.com/matrix-org/matrix-spec/issues/1840))
- 将被RFC 9110取代的RFC 7235和RFC 7230引用替换掉。([#1844](https://github.com/matrix-org/matrix-spec/issues/1844))
- 修复规范中的各种拼写错误。([#1877](https://github.com/matrix-org/matrix-spec/issues/1877))

### 应用服务 API[](https://spec.matrix.org/v1.11/changelog/#application-service-api)

**规范澄清**

- 澄清应用服务应通知与`sender_localpart`用户相关的事件。([#1810](https://github.com/matrix-org/matrix-spec/issues/1810))

### 身份服务 API[](https://spec.matrix.org/v1.11/changelog/#identity-service-api)

**弃用**

- 根据[MSC4126](https://github.com/matrix-org/matrix-spec-proposals/issues/4126)，使用查询字符串进行身份验证现已弃用，应使用`Authorization`头。([#1808](https://github.com/matrix-org/matrix-spec/issues/1808))

### 推送网关 API[](https://spec.matrix.org/v1.11/changelog/#push-gateway-api)

无重大变化。

### 房间版本[](https://spec.matrix.org/v1.11/changelog/#room-versions)

**规范澄清**

- 澄清修正事件仍需遵循所有适用的认证规则。([#1824](https://github.com/matrix-org/matrix-spec/issues/1824))
- 修复规范中的各种拼写错误。([#1827](https://github.com/matrix-org/matrix-spec/issues/1827), [#1848](https://github.com/matrix-org/matrix-spec/issues/1848))
- 修复房间版本1和2的事件格式渲染。([#1883](https://github.com/matrix-org/matrix-spec/issues/1883))
- 使用Hugo而非JavaScript生成目录。([#1884](https://github.com/matrix-org/matrix-spec/issues/1884))

### 附录[](https://spec.matrix.org/v1.11/changelog/#appendices)

**弃用**

- 根据[MSC4132](https://github.com/matrix-org/matrix-spec-proposals/pull/4132)，弃用通过别名识别房间中的事件链接。([#1823](https://github.com/matrix-org/matrix-spec/issues/1823))

**规范澄清**

- 定义‘不透明标识符语法’。([#1791](https://github.com/matrix-org/matrix-spec/issues/1791))
- 定义通用加密密钥表示。([#1819](https://github.com/matrix-org/matrix-spec/issues/1819))
- 将用户、房间和事件ID的大小限制移至附录，并澄清长度以字节为单位测量。([#1850](https://github.com/matrix-org/matrix-spec/issues/1850))

### 内部更改/工具[](https://spec.matrix.org/v1.11/changelog/#internal-changestooling)

**规范澄清**

- 更新规范发布流程和相关文档。([#1759](https://github.com/matrix-org/matrix-spec/issues/1759))
- 修复`@matrix-org/spec`的npm发布脚本。([#1765](https://github.com/matrix-org/matrix-spec/issues/1765))
- 修复`CONTRIBUTING.rst`中的格式问题。([#1769](https://github.com/matrix-org/matrix-spec/issues/1769))
- 改善移动设备上的渲染。([#1770](https://github.com/matrix-org/matrix-spec/issues/1770), [#1771](https://github.com/matrix-org/matrix-spec/issues/1771))
- 修复安全方案的OpenAPI定义。([#1772](https://github.com/matrix-org/matrix-spec/issues/1772))
- 简化`resolve-refs`部分的使用。([#1773](https://github.com/matrix-org/matrix-spec/issues/1773))
- 修复Hugo警告。([#1775](https://github.com/matrix-org/matrix-spec/issues/1775), [#1788](https://github.com/matrix-org/matrix-spec/issues/1788))
- 修复`github-labels.rst`。([#1781](https://github.com/matrix-org/matrix-spec/issues/1781))
- 更新依赖项。([#1786](https://github.com/matrix-org/matrix-spec/issues/1786), [#1803](https://github.com/matrix-org/matrix-spec/issues/1803), [#1804](https://github.com/matrix-org/matrix-spec/issues/1804))
- 在OpenAPI和JSON Schemas中递归解决`allOf`。([#1787](https://github.com/matrix-org/matrix-spec/issues/1787))
- 修复`render-object-table`部分的属性类型解析。([#1789](https://github.com/matrix-org/matrix-spec/issues/1789))
- 提取`Tag`类型的通用定义。([#1793](https://github.com/matrix-org/matrix-spec/issues/1793))
- 更新用于渲染规范的Hugo版本至v0.124.1。([#1794](https://github.com/matrix-org/matrix-spec/issues/1794))
- 为`patternProperties`添加模式格式支持。([#1796](https://github.com/matrix-org/matrix-spec/issues/1796))
- 清理OpenAPI定义中不必要的`allOf`。([#1797](https://github.com/matrix-org/matrix-spec/issues/1797))
- 在对象表中显示“附加属性”的信息。([#1798](https://github.com/matrix-org/matrix-spec/issues/1798))
- 修复`oneOf`下架构的锚点。([#1799](https://github.com/matrix-org/matrix-spec/issues/1799))
- 在OpenAPI定义中使用对`OneTimeKeys`架构的引用。([#1800](https://github.com/matrix-org/matrix-spec/issues/1800))
- 不使用仅包含`additionalProperties`或`patternProperties`的对象的`title`。([#1801](https://github.com/matrix-org/matrix-spec/issues/1801))
- 在`definition`短代码中添加锚点。([#1802](https://github.com/matrix-org/matrix-spec/issues/1802))
- 为Towncrier CI作业设置Python版本。([#1805](https://github.com/matrix-org/matrix-spec/issues/1805))
- 在CI中用环境文件替换`set-output`。([#1806](https://github.com/matrix-org/matrix-spec/issues/1806))
- 渲染响应头。([#1809](https://github.com/matrix-org/matrix-spec/issues/1809))
- 在更多地方使用支持格式的`patternProperties`。([#1813](https://github.com/matrix-org/matrix-spec/issues/1813))
- 增加对渲染字符串格式的支持。([#1814](https://github.com/matrix-org/matrix-spec/issues/1814))
- 重构内容库端点的OpenAPI定义。([#1822](https://github.com/matrix-org/matrix-spec/issues/1822))
- 清理拉取请求模板。([#1831](https://github.com/matrix-org/matrix-spec/issues/1831))
- 不在示例中添加空数组。([#1849](https://github.com/matrix-org/matrix-spec/issues/1849))
- 使用Hugo而非JavaScript生成目录。([#1851](https://github.com/matrix-org/matrix-spec/issues/1851), [#1885](https://github.com/matrix-org/matrix-spec/issues/1885))
- 修复规范发布问题模板中的语法错误。([#1856](https://github.com/matrix-org/matrix-spec/issues/1856))
- 使用环境变量进行Netlify构建作业。([#1865](https://github.com/matrix-org/matrix-spec/issues/1865))
- 在请求和响应内容类型上渲染添加/更改的信息。([#1876](https://github.com/matrix-org/matrix-spec/issues/1876))
- 修复生成的HTML中的验证错误。([#1880](https://github.com/matrix-org/matrix-spec/issues/1880))
- 确保大多数生成的HTML ID是唯一的。([#1881](https://github.com/matrix-org/matrix-spec/issues/1881))
- 允许为API端点生成的HTML ID指定前缀。([#1882](https://github.com/matrix-org/matrix-spec/issues/1882))

## v1.10[](https://spec.matrix.org/v1.11/changelog/#v110)

|   |   |
|---|---|
|Git 提交|[https://github.com/matrix-org/matrix-spec/tree/v1.10](https://github.com/matrix-org/matrix-spec/tree/v1.10)|
|发布日期|2024年3月22日|

### 客户端-服务器 API[](https://spec.matrix.org/v1.11/changelog/#client-server-api-1)

**向后兼容的更改**

- 根据[MSC4026](https://github.com/matrix-org/matrix-spec-proposals/pull/4026)，允许`/versions`可选接受身份验证。([#1728](https://github.com/matrix-org/matrix-spec/issues/1728))
- 根据[MSC4025](https://github.com/matrix-org/matrix-spec-proposals/pull/4025)，添加本地擦除请求。([#1730](https://github.com/matrix-org/matrix-spec/issues/1730))
- 根据[MSC2530](https://github.com/matrix-org/matrix-spec-proposals/pull/2530)，使用`body`字段作为可选媒体标题。([#1731](https://github.com/matrix-org/matrix-spec/issues/1731))
- 根据[MSC1929](https://github.com/matrix-org/matrix-spec-proposals/pull/1929)，添加服务器支持发现端点。([#1733](https://github.com/matrix-org/matrix-spec/issues/1733))
- 根据[MSC3077](https://github.com/matrix-org/matrix-spec-proposals/pull/3077)，增加对多流VoIP的支持。([#1735](https://github.com/matrix-org/matrix-spec/issues/1735))
- 根据[MSC4041](https://github.com/matrix-org/matrix-spec-proposals/pull/4041)，指定`Retry-After`头可以用于限制客户端的速率。([#1737](https://github.com/matrix-org/matrix-spec/issues/1737))
- 根据[MSC3981](https://github.com/matrix-org/matrix-spec-proposals/pull/3981)，增加对`GET /relations`端点递归的支持。([#1746](https://github.com/matrix-org/matrix-spec/issues/1746))

**规范澄清**

- 在HTML规范中，[strike](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/strike)元素已被弃用。客户端应优先使用[s](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/s)。([#1629](https://github.com/matrix-org/matrix-spec/issues/1629))
- 澄清已读回执应按线程和房间批量处理。([#1685](https://github.com/matrix-org/matrix-spec/issues/1685))
- 澄清可以基于回复创建线程。([#1687](https://github.com/matrix-org/matrix-spec/issues/1687))
- 在回复回退示例中澄清前缀序列应在每行重复。([#1690](https://github.com/matrix-org/matrix-spec/issues/1690))
- 澄清秘密存储的账户数据对象格式。([#1695](https://github.com/matrix-org/matrix-spec/issues/1695), [#1734](https://github.com/matrix-org/matrix-spec/issues/1734))
- 澄清密钥备份MAC实现不正确，并未通过HMAC-SHA-256处理密文。([#1712](https://github.com/matrix-org/matrix-spec/issues/1712))
- 在示例中澄清一次性密钥和回退密钥类型。([#1715](https://github.com/matrix-org/matrix-spec/issues/1715))
- 澄清SAS的HKDF计算使用base64编码的密钥而非原始密钥字节。([#1719](https://github.com/matrix-org/matrix-spec/issues/1719))
- 澄清如何在SAS过程的第12步执行ECDH交换。([#1720](https://github.com/matrix-org/matrix-spec/issues/1720))
- 根据[MSC4077](https://github.com/matrix-org/matrix-spec-proposals/pull/4077)，记录HTML标签的弃用政策。([#1732](https://github.com/matrix-org/matrix-spec/issues/1732))
- 在HTML规范中，[font](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/font)元素已被弃用。客户端应优先使用带有`data-mx-bg-color`和`data-mx-color`属性的[span](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/span)。([#1739](https://github.com/matrix-org/matrix-spec/issues/1739))
- 在`GET /hierarchy`端点中消除`PublicRoomsChunk`的使用歧义。([#1740](https://github.com/matrix-org/matrix-spec/issues/1740))
- 澄清在`m.call.candidates`中`sdpMid`和`sdpMLineIndex`不是必需的。([#1742](https://github.com/matrix-org/matrix-spec/issues/1742))
- 修复规范中的各种拼写错误。([#1748](https://github.com/matrix-org/matrix-spec/issues/1748))
- 明确指出每个`Content-Type`在非JSON请求/响应上可能有不同的行为。([#1756](https://github.com/matrix-org/matrix-spec/issues/1756))
- 根据[MSC4010](https://github.com/matrix-org/matrix-spec-proposals/pull/4010)，澄清`m.push_rules`账户数据类型不能使用`/account_data` API设置。([#1763](https://github.com/matrix-org/matrix-spec/issues/1763))

### 服务器-服务器 API[](https://spec.matrix.org/v1.11/changelog/#server-server-api-1)

**规范澄清**

- 通过使用`POST` HTTP方法澄清服务器-服务器 API请求签名示例，因为`GET`请求没有请求体。([#1721](https://github.com/matrix-org/matrix-spec/issues/1721))
- 在`GET /hierarchy`端点中消除`PublicRoomsChunk`的使用歧义。([#1740](https://github.com/matrix-org/matrix-spec/issues/1740))
- 澄清`GET /hierarchy`端点响应中`children`数组项中的`children_state`、`room_type`和`allowed_room_ids`属性不是必需的。([#1741](https://github.com/matrix-org/matrix-spec/issues/1741))

### 应用服务 API[](https://spec.matrix.org/v1.11/changelog/#application-service-api-1)

**规范澄清**

- 澄清在使用`m.login.application_service`登录类型且没有有效`as_token`时，`/login`和`/register`端点应失败。([#1744](https://github.com/matrix-org/matrix-spec/issues/1744))

### 身份服务 API[](https://spec.matrix.org/v1.11/changelog/#identity-service-api-1)

无重大变化。

### 推送网关 API[](https://spec.matrix.org/v1.11/changelog/#push-gateway-api-1)

无重大变化。

### 房间版本[](https://spec.matrix.org/v1.11/changelog/#room-versions-1)

**规范澄清**

- 对于房间版本7到11：澄清`invite->knock`不是合法的转换。([#1717](https://github.com/matrix-org/matrix-spec/issues/1717))

### 附录[](https://spec.matrix.org/v1.11/changelog/#appendices-1)

无重大变化。

### 内部更改/工具[](https://spec.matrix.org/v1.11/changelog/#internal-changestooling-1)

**规范澄清**

- 更新规范发布流程。([#1680](https://github.com/matrix-org/matrix-spec/issues/1680))
- 对贡献指南进行小的澄清。([#1697](https://github.com/matrix-org/matrix-spec/issues/1697))
- 将Docsy更新到v0.8.0。([#1699](https://github.com/matrix-org/matrix-spec/issues/1699), [#1762](https://github.com/matrix-org/matrix-spec/issues/1762))
- 修复`@matrix-org/spec`的npm发布脚本。([#1713](https://github.com/matrix-org/matrix-spec/issues/1713))
- 添加一些关于MSC实现要求的澄清。([#1718](https://github.com/matrix-org/matrix-spec/issues/1718))
- 更新HTML模板以包含指向对象架构定义的链接。([#1724](https://github.com/matrix-org/matrix-spec/issues/1724))
- 提取各种`/relations` API的所有通用参数。([#1745](https://github.com/matrix-org/matrix-spec/issues/1745))
- 在OpenAPI定义和JSON架构中添加对包含片段的`$ref` URI的支持。([#1751](https://github.com/matrix-org/matrix-spec/issues/1751), [#1754](https://github.com/matrix-org/matrix-spec/issues/1754))

## v1.9[](https://spec.matrix.org/v1.11/changelog/#v19)

|   |   |
|---|---|
|Git 提交|[https://github.com/matrix-org/matrix-spec/tree/v1.9](https://github.com/matrix-org/matrix-spec/tree/v1.9)|
|发布日期|2023年11月29日|

### 客户端-服务器 API[](https://spec.matrix.org/v1.11/changelog/#client-server-api-2)

**向后兼容的更改**

- 根据[MSC3958](https://github.com/matrix-org/matrix-spec-proposals/pull/3958)，添加`m.rule.suppress_edits`默认推送规则。([#1617](https://github.com/matrix-org/matrix-spec/issues/1617))

**规范澄清**

- 修复`m.call.negotiate`架构和示例。([#1546](https://github.com/matrix-org/matrix-spec/issues/1546))
- 澄清根据[MSC1772](https://github.com/matrix-org/matrix-spec-proposals/pull/1772)，`m.space.parent`和`m.space.child`的`via`属性是必需的。由@PaarthShah贡献。([#1618](https://github.com/matrix-org/matrix-spec/issues/1618))
- 在`/publicRooms` API中添加注释，说明服务器名称区分大小写。([#1638](https://github.com/matrix-org/matrix-spec/issues/1638))
- 澄清`m.room.name`事件中缺少`name`字段不是预期行为。([#1639](https://github.com/matrix-org/matrix-spec/issues/1639))
- 修复`GET /initialSync`中用于账户数据和状态事件的架构。([#1647](https://github.com/matrix-org/matrix-spec/issues/1647))
- 修复规范中的各种拼写错误。([#1658](https://github.com/matrix-org/matrix-spec/issues/1658), [#1661](https://github.com/matrix-org/matrix-spec/issues/1661), [#1665](https://github.com/matrix-org/matrix-spec/issues/1665))
- 修复`.m.rule.suppress_notices`推送规则不是有效JSON。([#1671](https://github.com/matrix-org/matrix-spec/issues/1671))
- 为`PushConditions`对象添加`event_property_is`和`event_property_contains`推送条件的缺失属性。([#1673](https://github.com/matrix-org/matrix-spec/issues/1673))
- 指出回退密钥应设置`fallback`属性为`true`。([#1676](https://github.com/matrix-org/matrix-spec/issues/1676))
- 澄清线程根不被视为线程内。([#1677](https://github.com/matrix-org/matrix-spec/issues/1677))

### 服务器-服务器 API[](https://spec.matrix.org/v1.11/changelog/#server-server-api-2)

**规范澄清**

- 修复`m.receipt` EDU的架构。([#1636](https://github.com/matrix-org/matrix-spec/issues/1636))
- 修复规范中的各种拼写错误。([#1661](https://github.com/matrix-org/matrix-spec/issues/1661))
- 澄清非本地用户的联邦请求无效。([#1672](https://github.com/matrix-org/matrix-spec/issues/1672))

### 应用服务 API[](https://spec.matrix.org/v1.11/changelog/#application-service-api-2)

无重大变化。

### 身份服务 API[](https://spec.matrix.org/v1.11/changelog/#identity-service-api-2)

无重大变化。

### 推送网关 API[](https://spec.matrix.org/v1.11/changelog/#push-gateway-api-2)

无重大变化。

### 房间版本[](https://spec.matrix.org/v1.11/changelog/#room-versions-2)

无重大变化。

### 附录[](https://spec.matrix.org/v1.11/changelog/#appendices-2)

**规范澄清**

- 澄清时间戳规范与闰秒的关系。([#1627](https://github.com/matrix-org/matrix-spec/issues/1627))
- 修复规范中的各种拼写错误。([#1652](https://github.com/matrix-org/matrix-spec/issues/1652))

### 内部更改/工具[](https://spec.matrix.org/v1.11/changelog/#internal-changestooling-2)

**向后兼容的更改**

- 为OpenAPI定义和JSON架构添加更多CI检查。([#1656](https://github.com/matrix-org/matrix-spec/issues/1656))
- 生成服务器-服务器OpenAPI定义。([#1657](https://github.com/matrix-org/matrix-spec/issues/1657))

**规范澄清**

- 将所有Swagger提及替换为OpenAPI。([#1633](https://github.com/matrix-org/matrix-spec/issues/1633))
- 修复JSON架构中的枚举类型。([#1634](https://github.com/matrix-org/matrix-spec/issues/1634))
- 修复`m.mentions`对象的架构。([#1635](https://github.com/matrix-org/matrix-spec/issues/1635))
- 修复客户端-服务器 API中`m.receipt`事件的渲染。([#1637](https://github.com/matrix-org/matrix-spec/issues/1637))
- 删除应用服务协议定义中必需的`fieldname`。([#1646](https://github.com/matrix-org/matrix-spec/issues/1646))
- 修复负责发布@matrix-org/spec包的GitHub操作工作流。([#1648](https://github.com/matrix-org/matrix-spec/issues/1648))
- 升级GitHub操作。([#1660](https://github.com/matrix-org/matrix-spec/issues/1660))

## v1.8[](https://spec.matrix.org/v1.11/changelog/#v18)

|   |   |
|---|---|
|Git 提交|[https://github.com/matrix-org/matrix-spec/tree/v1.8](https://github.com/matrix-org/matrix-spec/tree/v1.8)|
|发布日期|2023年8月23日|

### 客户端-服务器 API[](https://spec.matrix.org/v1.11/changelog/#client-server-api-3)

**向后兼容的更改**

- 根据[MSC2249](https://github.com/matrix-org/matrix-spec-proposals/pull/2249)，要求调用者加入房间以报告其事件。([#1517](https://github.com/matrix-org/matrix-spec/issues/1517))

**规范澄清**

- 修复`m.reaction`事件的JSON架构定义中缺少`type`属性。由@chebureki贡献。([#1552](https://github.com/matrix-org/matrix-spec/issues/1552))
- 确保示例类型与定义中的架构匹配。([#1563](https://github.com/matrix-org/matrix-spec/issues/1563))
- 在`POST /publicRooms`端点架构中允许`room_types`为`null`。([#1564](https://github.com/matrix-org/matrix-spec/issues/1564))
- 修复标题格式错误。由@midnightveil贡献。([#1578](https://github.com/matrix-org/matrix-spec/issues/1578))
- 渲染二进制请求和响应体。([#1579](https://github.com/matrix-org/matrix-spec/issues/1579))
- 修复SAS验证中MAC计算的描述。([#1590](https://github.com/matrix-org/matrix-spec/issues/1590))
- 更新SAS表情符号定义数据的链接。([#1593](https://github.com/matrix-org/matrix-spec/issues/1593))
- 修复规范中的各种拼写错误。([#1597](https://github.com/matrix-org/matrix-spec/issues/1597))

### 服务器-服务器 API[](https://spec.matrix.org/v1.11/changelog/#server-server-api-3)

**弃用**

- 根据 [MSC4040](https://github.com/matrix-org/matrix-spec-proposals/pull/4040)，弃用在服务器发现过程中使用的 `matrix` SRV 查找步骤。([#1624](https://github.com/matrix-org/matrix-spec/issues/1624))

**向后兼容的更改**

- 根据 [MSC4040](https://github.com/matrix-org/matrix-spec-proposals/pull/4040)，在服务器发现中添加 `matrix-fed` SRV 查找步骤。([#1624](https://github.com/matrix-org/matrix-spec/issues/1624))

**规范澄清**

- 记录为什么 `/state_ids` 可以返回 404。([#1521](https://github.com/matrix-org/matrix-spec/issues/1521))
- 修正 `POST /_matrix/federation/v1/user/keys/claim` 的响应定义。([#1559](https://github.com/matrix-org/matrix-spec/issues/1559))
- 修正服务器密钥定义中的示例。([#1560](https://github.com/matrix-org/matrix-spec/issues/1560))
- 确保示例类型与定义中的模式匹配。([#1563](https://github.com/matrix-org/matrix-spec/issues/1563))
- 允许在 `POST /publicRooms` 端点模式中的 `room_types` 中使用 `null`。([#1564](https://github.com/matrix-org/matrix-spec/issues/1564))
- 修复损坏的标题格式。由 @midnightveil 贡献。([#1578](https://github.com/matrix-org/matrix-spec/issues/1578))
- 删除关于 SRV 记录查找的“默认端口”的多余提及。([#1615](https://github.com/matrix-org/matrix-spec/issues/1615))
- 将服务器名称解析步骤切换为有序列表。([#1623](https://github.com/matrix-org/matrix-spec/issues/1623))

### 应用服务 API[](https://spec.matrix.org/v1.11/changelog/#application-service-api-3)

**规范澄清**

- 修正第三方查找查询中自定义 `fields` 的类型。([#1584](https://github.com/matrix-org/matrix-spec/issues/1584))

### 身份服务 API[](https://spec.matrix.org/v1.11/changelog/#identity-service-api-3)

**规范澄清**

- 确保示例类型与定义中的模式匹配。([#1563](https://github.com/matrix-org/matrix-spec/issues/1563))

### 推送网关 API[](https://spec.matrix.org/v1.11/changelog/#push-gateway-api-3)

无重大变化。

### 房间版本[](https://spec.matrix.org/v1.11/changelog/#room-versions-3)

**向后兼容的更改**

- 根据 [MSC3820](https://github.com/matrix-org/matrix-spec-proposals/pull/3820) 添加房间版本 11。([#1604](https://github.com/matrix-org/matrix-spec/issues/1604))
- 根据 [MSC2174](https://github.com/matrix-org/matrix-spec-proposals/pull/2174)，在房间版本 11 中将 `redacts` 从顶层移动到 `m.room.redaction` 事件的 `content` 中。([#1604](https://github.com/matrix-org/matrix-spec/issues/1604))
- 根据 [MSC2175](https://github.com/matrix-org/matrix-spec-proposals/pull/2175)，在房间版本 11 中从 `m.room.creator` 事件中移除 `creator`。([#1604](https://github.com/matrix-org/matrix-spec/issues/1604))
- 根据 [MSC3989](https://github.com/matrix-org/matrix-spec-proposals/pull/3989)，在房间版本 11 中移除事件中剩余的 `origin` 使用。([#1604](https://github.com/matrix-org/matrix-spec/issues/1604))
- 根据 [MSC2176](https://github.com/matrix-org/matrix-spec-proposals/pull/2176) 和 [MSC3821](https://github.com/matrix-org/matrix-spec-proposals/pull/3821)，更新房间版本 11 中的修订规则。([#1604](https://github.com/matrix-org/matrix-spec/issues/1604))

### 附录[](https://spec.matrix.org/v1.11/changelog/#appendices-3)

**向后兼容的更改**

- 根据 [MSC4009](https://github.com/matrix-org/matrix-spec-proposals/pull/4009)，允许在 Matrix ID 中使用 `+`。([#1583](https://github.com/matrix-org/matrix-spec/issues/1583))

**规范澄清**

- 澄清规范中关于处理负零的规范 JSON；同时，给出负零和十的幂的示例。([#1573](https://github.com/matrix-org/matrix-spec/issues/1573))

### 内部更改/工具[](https://spec.matrix.org/v1.11/changelog/#internal-changestooling-3)

**向后兼容的更改**

- 将 Swagger 数据升级到 OpenAPI 3.1。([#1310](https://github.com/matrix-org/matrix-spec/issues/1310))
- 创建 `@matrix-org/spec` npm 包以提供 SAS Emoji 数据定义和翻译。([#1620](https://github.com/matrix-org/matrix-spec/issues/1620))

**规范澄清**

- 更新 CI 以验证变更日志条目的文件扩展名。([#1542](https://github.com/matrix-org/matrix-spec/issues/1542))
- 披露部分现在仅在折叠时显示其标题。([#1549](https://github.com/matrix-org/matrix-spec/issues/1549))
- 修复 Hugo 最新版本中的侧边栏。([#1551](https://github.com/matrix-org/matrix-spec/issues/1551))
- 提升 jsonschema 以验证符合 Draft 2020-12 的 JSON 模式。([#1556](https://github.com/matrix-org/matrix-spec/issues/1556))
- 使用 Redocly CLI 验证 OpenAPI 定义。([#1558](https://github.com/matrix-org/matrix-spec/issues/1558))
- 使用标签名称作为 OpenAPI 定义版本。([#1561](https://github.com/matrix-org/matrix-spec/issues/1561))
- 确保 `x-changedInMatrixVersion` 中的版本是字符串。([#1562](https://github.com/matrix-org/matrix-spec/issues/1562))
- 澄清文档风格指南中 ABNF 的语法使用。([#1582](https://github.com/matrix-org/matrix-spec/issues/1582))
- 删除 JSON 模式中不必要的 `oneOf`。([#1585](https://github.com/matrix-org/matrix-spec/issues/1585))
- 更新用于渲染规范的 Hugo 版本到 v0.113.0。([#1591](https://github.com/matrix-org/matrix-spec/issues/1591))
- 修复使用新版本 towncrier 渲染的变更日志。([#1598](https://github.com/matrix-org/matrix-spec/issues/1598))
- 改善桌面显示上的表格布局。由 Martin Fischer 贡献。([#1601](https://github.com/matrix-org/matrix-spec/issues/1601))

## v1.7[](https://spec.matrix.org/v1.11/changelog/#v17)

|   |   |
|---|---|
|Git commit|[https://github.com/matrix-org/matrix-spec/tree/v1.7](https://github.com/matrix-org/matrix-spec/tree/v1.7)|
|发布日期|2023年5月25日|

### 客户端-服务器 API[](https://spec.matrix.org/v1.11/changelog/#client-server-api-4)

**新端点**

- [`POST /_matrix/media/v1/create`](https://spec.matrix.org/v1.11/client-server-api/#post_matrixmediav1create) ([#1499](https://github.com/matrix-org/matrix-spec/issues/1499))
- [`PUT /_matrix/media/v3/upload/{serverName}/{mediaId}`](https://spec.matrix.org/v1.11/client-server-api/#put_matrixmediav3uploadservernamemediaid) ([#1499](https://github.com/matrix-org/matrix-spec/issues/1499))
- [`POST /_matrix/client/v1/login/get_token`](https://spec.matrix.org/v1.11/client-server-api/#post_matrixclientv1loginget_token) ([#1530](https://github.com/matrix-org/matrix-spec/issues/1530))

**向后兼容的更改**

- 根据 [MSC3925](https://github.com/matrix-org/matrix-spec-proposals/pull/3925)，更改服务器端的 `m.replace`（编辑）事件聚合。([#1440](https://github.com/matrix-org/matrix-spec/issues/1440), [#1525](https://github.com/matrix-org/matrix-spec/issues/1525))
- 根据 [MSC3758](https://github.com/matrix-org/matrix-spec-proposals/pull/3758) 和 [MSC3966](https://github.com/matrix-org/matrix-spec-proposals/pull/3966)，添加新的推送规则条件 `event_property_is` 和 `event_property_contains`。([#1464](https://github.com/matrix-org/matrix-spec/issues/1464))
- 根据 [MSC2677](https://github.com/matrix-org/matrix-spec-proposals/pull/2677)，添加 `m.annotation` 关系（反应）。([#1475](https://github.com/matrix-org/matrix-spec/issues/1475), [#1531](https://github.com/matrix-org/matrix-spec/issues/1531))
- 根据 [MSC2246](https://github.com/matrix-org/matrix-spec-proposals/pull/2246)，支持异步媒体上传。([#1499](https://github.com/matrix-org/matrix-spec/issues/1499), [#1510](https://github.com/matrix-org/matrix-spec/issues/1510))
- 根据 [MSC3952](https://github.com/matrix-org/matrix-spec-proposals/pull/3952)，记录 `m.mentions` 属性；`.m.rule.is_user_mention` 和 `.m.rule.is_room_mention` 推送规则；以及其他通知行为。([#1508](https://github.com/matrix-org/matrix-spec/issues/1508))
- 根据 [MSC2746](https://github.com/matrix-org/matrix-spec-proposals/pull/2746)，改进 VoIP 信令。([#1511](https://github.com/matrix-org/matrix-spec/issues/1511), [#1540](https://github.com/matrix-org/matrix-spec/issues/1540))
- 根据 [MSC3970](https://github.com/matrix-org/matrix-spec-proposals/pull/3970)，更新事务 ID 的范围。([#1526](https://github.com/matrix-org/matrix-spec/issues/1526))
- 根据 [MSC3860](https://github.com/matrix-org/matrix-spec-proposals/pull/3860)，添加重定向媒体下载的能力。([#1529](https://github.com/matrix-org/matrix-spec/issues/1529))
- 根据 [MSC3882](https://github.com/matrix-org/matrix-spec-proposals/pull/3882)，添加使用现有会话登录另一个会话的能力。([#1530](https://github.com/matrix-org/matrix-spec/issues/1530))

**规范澄清**

- 澄清关于子事件聚合的规范部分。([#1424](https://github.com/matrix-org/matrix-spec/issues/1424))
- 修正整个规范中的各种拼写错误。([#1432](https://github.com/matrix-org/matrix-spec/issues/1432), [#1442](https://github.com/matrix-org/matrix-spec/issues/1442), [#1447](https://github.com/matrix-org/matrix-spec/issues/1447), [#1455](https://github.com/matrix-org/matrix-spec/issues/1455), [#1465](https://github.com/matrix-org/matrix-spec/issues/1465), [#1500](https://github.com/matrix-org/matrix-spec/issues/1500), [#1509](https://github.com/matrix-org/matrix-spec/issues/1509))
- 澄清线程的回复链回退可能不存在。([#1439](https://github.com/matrix-org/matrix-spec/issues/1439))
- 澄清内容特定推送规则匹配的事件属性。([#1441](https://github.com/matrix-org/matrix-spec/issues/1441))
- 澄清使请求幂等的语义。([#1449](https://github.com/matrix-org/matrix-spec/issues/1449))
- 改进客户端使用推送规则的文档。([#1461](https://github.com/matrix-org/matrix-spec/issues/1461))
- 澄清服务器应在未指定时对过滤器强制执行默认 `limit`。([#1463](https://github.com/matrix-org/matrix-spec/issues/1463))
- 根据 [MSC3873](https://github.com/matrix-org/matrix-spec-proposals/pull/3873) 和 [MSC3980](https://github.com/matrix-org/matrix-spec-proposals/pull/3980)，在推送规则处理中使用带点的属性名称时消除歧义。([#1464](https://github.com/matrix-org/matrix-spec/issues/1464))
- 修正注册端点描述中的措辞和排版。由 @HarHarLinks 贡献。([#1474](https://github.com/matrix-org/matrix-spec/issues/1474))
- 删除关于 `state_default` 在房间中没有 `m.room.power_levels` 事件时为 0 的过时文本。([#1479](https://github.com/matrix-org/matrix-spec/issues/1479))
- 删除 `/keys/query` 端点上的虚构 `token` 参数。([#1485](https://github.com/matrix-org/matrix-spec/issues/1485))
- 修正具有类型列表的属性的渲染。([#1487](https://github.com/matrix-org/matrix-spec/issues/1487))
- 澄清交叉签名签名上传请求的部分。([#1495](https://github.com/matrix-org/matrix-spec/issues/1495))
- 根据 [MSC3987](https://github.com/matrix-org/matrix-spec-proposals/pull/3987)，删除 `dont_notify` 和 `coalesce` 推送规则动作。([#1501](https://github.com/matrix-org/matrix-spec/issues/1501))
- 部分恢复 [f1f32d3](https://github.com/matrix-org/matrix-spec/commit/f1f32d3a15c325ee8aa9d2c6bafd96c38069bb53) 澄清 `m.location` 方案。由 @HarHarLinks 贡献。([#1507](https://github.com/matrix-org/matrix-spec/issues/1507))
- 添加缺失的 `knock_restricted` 加入规则到 `m.room.join_rules` 模式。([#1535](https://github.com/matrix-org/matrix-spec/issues/1535))

### 服务器-服务器 API[](https://spec.matrix.org/v1.11/changelog/#server-server-api-4)

**规范澄清**

- 修正整个规范中的各种拼写错误。([#1431](https://github.com/matrix-org/matrix-spec/issues/1431), [#1447](https://github.com/matrix-org/matrix-spec/issues/1447), [#1466](https://github.com/matrix-org/matrix-spec/issues/1466), [#1518](https://github.com/matrix-org/matrix-spec/issues/1518))
- 通过删除对 `examples/minimal_pdu.json` 的无效 OpenAPI 引用来修复 PDU 示例。([#1454](https://github.com/matrix-org/matrix-spec/issues/1454))
- 从 `/_matrix/key/v2/server/` 中删除剩余的 `{key_id}`。([#1473](https://github.com/matrix-org/matrix-spec/issues/1473))
- 从参考哈希计算部分中删除多余的 `age_ts` 字段。([#1536](https://github.com/matrix-org/matrix-spec/issues/1536))

### 应用服务 API[](https://spec.matrix.org/v1.11/changelog/#application-service-api-4)

**新端点**

- [`POST /_matrix/app/v1/ping`](https://spec.matrix.org/v1.11/application-service-api/#post_matrixappv1ping) ([#1516](https://github.com/matrix-org/matrix-spec/issues/1516))
- [`POST /_matrix/client/v1/appservice/{appserviceId}/ping`](https://spec.matrix.org/v1.11/application-service-api/#post_matrixclientv1appserviceappserviceidping) ([#1516](https://github.com/matrix-org/matrix-spec/issues/1516))

**向后兼容的更改**

- 根据 [MSC2659](https://github.com/matrix-org/matrix-spec-proposals/pull/2659)，添加 homeserver->appservice ping 机制。由 @tulir 在 @beeper 贡献。([#1516](https://github.com/matrix-org/matrix-spec/issues/1516), [#1541](https://github.com/matrix-org/matrix-spec/issues/1541))

**规范澄清**

- 修正整个规范中的各种拼写错误。([#1447](https://github.com/matrix-org/matrix-spec/issues/1447))

### 身份服务 API[](https://spec.matrix.org/v1.11/changelog/#identity-service-api-4)

**规范澄清**

- 修正 `/_matrix/identity/v2/store-invite` 的响应格式。([#1486](https://github.com/matrix-org/matrix-spec/issues/1486))

### 推送网关 API[](https://spec.matrix.org/v1.11/changelog/#push-gateway-api-4)

无重大变化。

### 房间版本[](https://spec.matrix.org/v1.11/changelog/#room-versions-4)

**规范澄清**

- 澄清早期房间版本中的事件 ID 格式 ([#1484](https://github.com/matrix-org/matrix-spec/issues/1484))

### 附录[](https://spec.matrix.org/v1.11/changelog/#appendices-4)

**规范澄清**

- 澄清术语“Canonical JSON”在 Matrix 规范中的特定含义。([#1468](https://github.com/matrix-org/matrix-spec/issues/1468))
- 删除对群组的引用。([#1483](https://github.com/matrix-org/matrix-spec/issues/1483))
- 澄清早期房间版本中的事件 ID 格式。([#1484](https://github.com/matrix-org/matrix-spec/issues/1484))

### 内部更改/工具[](https://spec.matrix.org/v1.11/changelog/#internal-changestooling-4)

**规范澄清**

- 更新对 Inter 字体的引用。([#1444](https://github.com/matrix-org/matrix-spec/issues/1444))
- 端点披露现在隐藏除 URL 之外的所有内容。([#1446](https://github.com/matrix-org/matrix-spec/issues/1446))
- 在存在其他属性的情况下，将 $ref 包装在 allOf 中，以提高 OpenAPI 合规性。([#1457](https://github.com/matrix-org/matrix-spec/issues/1457))
- 对 GitHub Actions 工作流进行小幅清理 ([#1476](https://github.com/matrix-org/matrix-spec/issues/1476))
- 修复附加属性的锚点生成。([#1488](https://github.com/matrix-org/matrix-spec/issues/1488))
- 修正整个规范中的各种拼写错误。([#1534](https://github.com/matrix-org/matrix-spec/issues/1534))
- 记录更多规范发布时间表/流程。([#1538](https://github.com/matrix-org/matrix-spec/issues/1538))

## v1.6[](https://spec.matrix.org/v1.11/changelog/#v16)

|   |   |
|---|---|
|Git commit|[https://github.com/matrix-org/matrix-spec/tree/v1.6](https://github.com/matrix-org/matrix-spec/tree/v1.6)|
|发布日期|2023年2月14日|

### 客户端-服务器 API[](https://spec.matrix.org/v1.11/changelog/#client-server-api-5)

**向后兼容的更改**

- 根据 [MSC3743](https://github.com/matrix-org/matrix-spec-proposals/pull/3743)，添加关于未知端点/方法的标准错误响应信息。([#1347](https://github.com/matrix-org/matrix-spec/issues/1347))
- 根据 [MSC3030](https://github.com/matrix-org/matrix-spec-proposals/pull/3030)，添加 `/rooms/<roomID>/timestamp_to_event` 端点。([#1366](https://github.com/matrix-org/matrix-spec/issues/1366))
- 根据 [MSC3783](https://github.com/matrix-org/matrix-spec-proposals/pull/3783)，定义 `hkdf-hmac-sha256.v2` SAS 验证的 MAC 方法。([#1412](https://github.com/matrix-org/matrix-spec/issues/1412))

**规范澄清**

- 澄清权限级别的整数范围。([#1169](https://github.com/matrix-org/matrix-spec/issues/1169), [#1355](https://github.com/matrix-org/matrix-spec/issues/1355))
- 澄清 `/context` 即使 `limit` 为零也总是返回 `event`。由 @sumnerevans 在 @beeper 贡献。([#1239](https://github.com/matrix-org/matrix-spec/issues/1239))
- 澄清删除推送器时需要哪些字段 ([#1321](https://github.com/matrix-org/matrix-spec/issues/1321))
- 改善推送规则种类和动作的展示。([#1348](https://github.com/matrix-org/matrix-spec/issues/1348))
- 为 m.call.answer 模式添加缺失的描述。([#1353](https://github.com/matrix-org/matrix-spec/issues/1353))
- 修正整个规范中的各种拼写错误。([#1363](https://github.com/matrix-org/matrix-spec/issues/1363))
- 澄清端到端加密部分的内容。([#1381](https://github.com/matrix-org/matrix-spec/issues/1381))
- 将登录 API 定义移动到正确的标题下。由 @HarHarLinks 贡献。([#1382](https://github.com/matrix-org/matrix-spec/issues/1382))
- 澄清哪些事件将包含在 Stripped State 中。由 @andybalaam 贡献。([#1409](https://github.com/matrix-org/matrix-spec/issues/1409))
- 为 3PID `medium` 的定义添加规范链接。([#1417](https://github.com/matrix-org/matrix-spec/issues/1417))
- 修正规范中默认覆盖推送规则的顺序。([#1421](https://github.com/matrix-org/matrix-spec/issues/1421))
- 改善富文本部分中标签及其属性之间的区别。由 Nico 贡献。([#1433](https://github.com/matrix-org/matrix-spec/issues/1433))

### 服务器-服务器 API[](https://spec.matrix.org/v1.11/changelog/#server-server-api-5)

**重大更改**

- 根据 [MSC3938](https://github.com/matrix-org/matrix-spec-proposals/pull/3938)，从服务器 `/keys` 端点中移除 `keyId`。([#1350](https://github.com/matrix-org/matrix-spec/issues/1350))

**向后兼容的更改**

- 根据 [MSC3743](https://github.com/matrix-org/matrix-spec-proposals/pull/3743)，添加关于未知端点/方法的标准错误响应信息。([#1347](https://github.com/matrix-org/matrix-spec/issues/1347))
- 根据 [MSC3030](https://github.com/matrix-org/matrix-spec-proposals/pull/3030)，添加 `/timestamp_to_event/<roomID>` 端点。([#1366](https://github.com/matrix-org/matrix-spec/issues/1366))
- 根据 [MSC3706](https://github.com/matrix-org/matrix-doc/pull/3706)，扩展 `/_matrix/federation/v2/send_join` 以允许省略成员事件。([#1393](https://github.com/matrix-org/matrix-spec/issues/1393), [#1398](https://github.com/matrix-org/matrix-spec/issues/1398))
- 根据 [MSC3943](https://github.com/matrix-org/matrix-doc/pull/3943)，注意 `/_matrix/federation/v2/send_join` 应包括无名房间的英雄，即使允许省略成员事件。([#1425](https://github.com/matrix-org/matrix-spec/issues/1425))

**规范澄清**

- 在邀请端点定义中内联包含示例而不是使用引用。([#1349](https://github.com/matrix-org/matrix-spec/issues/1349))
- 修正 `POST _matrix/federation/v1/user/keys/claim` 响应模式。([#1351](https://github.com/matrix-org/matrix-spec/issues/1351))
- 修正“接收 PDU 时执行的检查”部分中默认邀请级别的定义。([#1371](https://github.com/matrix-org/matrix-spec/issues/1371))
- 澄清 CNAME 对于服务器名称是允许的。([#1376](https://github.com/matrix-org/matrix-spec/issues/1376))
- 修正 EDU 示例中的 `edu_type`。([#1383](https://github.com/matrix-org/matrix-spec/issues/1383))

### 应用服务 API[](https://spec.matrix.org/v1.11/changelog/#application-service-api-5)

**向后兼容的更改**

- 根据 [MSC3743](https://github.com/matrix-org/matrix-spec-proposals/pull/3743)，添加关于未知端点/方法的标准错误响应信息。([#1347](https://github.com/matrix-org/matrix-spec/issues/1347))

### 身份服务 API[](https://spec.matrix.org/v1.11/changelog/#identity-service-api-5)

**向后兼容的更改**

- 根据 [MSC3743](https://github.com/matrix-org/matrix-spec-proposals/pull/3743)，添加关于未知端点/方法的标准错误响应信息。([#1347](https://github.com/matrix-org/matrix-spec/issues/1347))

### 推送网关 API[](https://spec.matrix.org/v1.11/changelog/#push-gateway-api-5)

**向后兼容的更改**

- 根据 [MSC3743](https://github.com/matrix-org/matrix-spec-proposals/pull/3743)，添加关于未知端点/方法的标准错误响应信息。([#1347](https://github.com/matrix-org/matrix-spec/issues/1347))

### 房间版本[](https://spec.matrix.org/v1.11/changelog/#room-versions-5)

**向后兼容的更改**

- 根据 [MSC3904](https://github.com/matrix-org/matrix-spec-proposals/pull/3904)，将默认房间版本更新为 10。([#1397](https://github.com/matrix-org/matrix-spec/issues/1397))

**规范澄清**

- 澄清房间版本的语法。([#1422](https://github.com/matrix-org/matrix-spec/issues/1422))
- 修正整个规范中的各种拼写错误。([#1423](https://github.com/matrix-org/matrix-spec/issues/1423))

### 附录[](https://spec.matrix.org/v1.11/changelog/#appendices-5)

无重大变化。

### 内部更改/工具[](https://spec.matrix.org/v1.11/changelog/#internal-changestooling-5)

**规范澄清**

- 在 README 中添加不稳定规范的链接。([#1357](https://github.com/matrix-org/matrix-spec/issues/1357))
- 改善在失败事件中提案检索脚本的安全性。([#1368](https://github.com/matrix-org/matrix-spec/issues/1368))
- 在 OpenAPI 文件中将 `<content>` 重命名为 `content` 以进行内容上传。([#1370](https://github.com/matrix-org/matrix-spec/issues/1370))
- 停止在我们已有示例的地方自动生成示例。([#1384](https://github.com/matrix-org/matrix-spec/issues/1384))
- 改善推送通知部分定义的格式。([#1415](https://github.com/matrix-org/matrix-spec/issues/1415))

## v1.5[](https://spec.matrix.org/v1.11/changelog/#v15)

|   |   |
|---|---|
|Git commit|[https://github.com/matrix-org/matrix-spec/tree/v1.5](https://github.com/matrix-org/matrix-spec/tree/v1.5)|
|发布日期|2022年11月17日|

### 客户端-服务器 API[](https://spec.matrix.org/v1.11/changelog/#client-server-api-6)

**向后兼容的更改**

- 根据 [MSC3267](https://github.com/matrix-org/matrix-spec-proposals/pull/3267)，添加 `m.reference` 关系。([#1206](https://github.com/matrix-org/matrix-spec/issues/1206))
- 添加缺失的 `m.key.verification.request` 消息类型用于房间内验证。([#1271](https://github.com/matrix-org/matrix-spec/issues/1271))

**规范澄清**

- 修正整个规范中的各种拼写错误。([#1260](https://github.com/matrix-org/matrix-spec/issues/1260), [#1265](https://github.com/matrix-org/matrix-spec/issues/1265), [#1276](https://github.com/matrix-org/matrix-spec/issues/1276))
- 修正 `/sync` 中 `device_one_time_keys_count` 的命名。([#1266](https://github.com/matrix-org/matrix-spec/issues/1266))
- 改善事件子类型的显示。([#1283](https://github.com/matrix-org/matrix-spec/issues/1283))
- 改善关于短暂事件的文档。([#1284](https://github.com/matrix-org/matrix-spec/issues/1284))
- 为 `/_matrix/client/v3/directory/rooms/{roomAlias}` 定义 400 响应。([#1286](https://github.com/matrix-org/matrix-spec/issues/1286))
- 澄清端到端加密部分的内容。([#1294](https://github.com/matrix-org/matrix-spec/issues/1294), [#1345](https://github.com/matrix-org/matrix-spec/issues/1345))
- 整个规范中进行各种澄清。([#1306](https://github.com/matrix-org/matrix-spec/issues/1306))
- 将 `set_sound` 推送规则动作替换为 `set_tweak`。([#1318](https://github.com/matrix-org/matrix-spec/issues/1318))
- 澄清 `PUT /_matrix/client/v3/pushrules/{scope}/{kind}/{ruleId}` 的行为。([#1319](https://github.com/matrix-org/matrix-spec/issues/1319))
- 澄清 `.m.rule.master` 比任何推送规则具有更高的优先级。([#1320](https://github.com/matrix-org/matrix-spec/issues/1320))
- 在 `POST /_matrix/client/v3/refresh` 端点要求请求字段 `refresh_token`。([#1323](https://github.com/matrix-org/matrix-spec/issues/1323))
- 修正规范中的多个损坏链接。([#1330](https://github.com/matrix-org/matrix-spec/issues/1330))
- 在 `GET /_matrix/client/v3/sync` 响应示例中添加示例读取回执。([#1341](https://github.com/matrix-org/matrix-spec/issues/1341))

### 服务器-服务器 API[](https://spec.matrix.org/v1.11/changelog/#server-server-api-6)

**规范澄清**

- 修正规范中的多个损坏链接。([#1330](https://github.com/matrix-org/matrix-spec/issues/1330))

### 应用服务 API[](https://spec.matrix.org/v1.11/changelog/#application-service-api-6)

**规范澄清**

- 澄清应用服务只能注册对本地用户的兴趣，根据 [MSC3905](https://github.com/matrix-org/matrix-spec-proposals/issues/3905)。([#1305](https://github.com/matrix-org/matrix-spec/issues/1305))

### 身份服务 API[](https://spec.matrix.org/v1.11/changelog/#identity-service-api-6)

**规范澄清**

- 修正规范中的多个损坏链接。([#1330](https://github.com/matrix-org/matrix-spec/issues/1330))

### 推送网关 API[](https://spec.matrix.org/v1.11/changelog/#push-gateway-api-6)

无重大变化。

### 房间版本[](https://spec.matrix.org/v1.11/changelog/#room-versions-6)

**规范澄清**

- 重新措辞事件授权规则，澄清用户不能降级具有相同权限级别的其他用户。([#1269](https://github.com/matrix-org/matrix-spec/issues/1269))
- 对事件授权规则文本进行各种澄清。([#1270](https://github.com/matrix-org/matrix-spec/issues/1270))
- 修正规范中的多个损坏链接。([#1330](https://github.com/matrix-org/matrix-spec/issues/1330))

### 附录[](https://spec.matrix.org/v1.11/changelog/#appendices-6)

无重大变化。

### 内部更改/工具[](https://spec.matrix.org/v1.11/changelog/#internal-changestooling-6)

**向后兼容的更改**

- 更新 docsy 主题到 v0.5.0 + matrix.org 修改 ([https://github.com/matrix-org/docsy/commit/a0032f8db919a6c67ba6cdef2c455f105b6272a2)](https://github.com/matrix-org/docsy/commit/a0032f8db919a6c67ba6cdef2c455f105b6272a2))。([#1295](https://github.com/matrix-org/matrix-spec/issues/1295))

**规范澄清**

- 改善 `resolve-additional-types` 模板发出的错误消息。([#1303](https://github.com/matrix-org/matrix-spec/issues/1303))
- 修正 API 查看器的链接。([#1308](https://github.com/matrix-org/matrix-spec/issues/1308))
- 停止将客户端-服务器 API 和房间版本规范的子部分渲染为单独的页面。([#1317](https://github.com/matrix-org/matrix-spec/issues/1317))
- 使用链接检查器确保我们没有损坏的链接。([#1329](https://github.com/matrix-org/matrix-spec/issues/1329), [#1338](https://github.com/matrix-org/matrix-spec/issues/1338))
- 更新 Swagger 定义预览的说明。([#1331](https://github.com/matrix-org/matrix-spec/issues/1331))
- 使定义锚点更独特。([#1339](https://github.com/matrix-org/matrix-spec/issues/1339))
- 使用 towncrier 生成不稳定的变更日志，以保持一致性。([#1340](https://github.com/matrix-org/matrix-spec/issues/1340))
- 更新 CONTRIBUTING.md 以提到对此 repo 的非内容更改应有“内部”变更日志条目。([#1342](https://github.com/matrix-org/matrix-spec/issues/1342))
- 使用新模块更新模块摘要表：事件替换、线程和引用关系。([#1344](https://github.com/matrix-org/matrix-spec/issues/1344))
- 禁用规范的 RSS 生成。([#1346](https://github.com/matrix-org/matrix-spec/issues/1346))

## v1.4[](https://spec.matrix.org/v1.11/changelog/#v14)

|   |   |
|---|---|
|Git commit|[https://github.com/matrix-org/matrix-spec/tree/v1.4](https://github.com/matrix-org/matrix-spec/tree/v1.4)|
|发布日期|2022年9月29日|

### 客户端-服务器 API[](https://spec.matrix.org/v1.11/changelog/#client-server-api-7)

**移除的端点**

- 根据 [MSC3844](https://github.com/matrix-org/matrix-spec-proposals/pull/3844)，移除未使用的策略房间共享机制。([#1196](https://github.com/matrix-org/matrix-spec/issues/1196))

**向后兼容的更改**

- 根据 [MSC3786](https://github.com/matrix-org/matrix-spec-proposals/pull/3786)，添加 `.m.rule.room.server_acl` 推送规则以匹配 `m.room.server_acl` 事件。([#1190](https://github.com/matrix-org/matrix-spec/issues/1190), [#1201](https://github.com/matrix-org/matrix-spec/issues/1201))
- 根据 [MSC3828](https://github.com/matrix-org/matrix-spec-proposals/pull/3828)，向媒体库添加 `Cross-Origin-Resource-Policy` (CORP) 头。([#1197](https://github.com/matrix-org/matrix-spec/issues/1197))
- 根据 [MSC3818](https://github.com/matrix-org/matrix-spec-proposals/pull/3818)，在升级房间时复制房间的 `type`。([#1198](https://github.com/matrix-org/matrix-spec/issues/1198))
- 根据 [MSC3827](https://github.com/matrix-org/matrix-spec-proposals/pull/3827)，向 `/publicRooms` 添加 `room_types` 过滤器和 `room_type` 响应。([#1199](https://github.com/matrix-org/matrix-spec/issues/1199))
- 根据 [MSC2676](https://github.com/matrix-org/matrix-spec-proposals/pull/2676)，添加 `m.replace` 关系（事件编辑）。([#1211](https://github.com/matrix-org/matrix-spec/issues/1211))
- 根据 [MSC2285](https://github.com/matrix-org/matrix-spec-proposals/pull/2285)，添加 `m.read.private` 回执。([#1216](https://github.com/matrix-org/matrix-spec/issues/1216))
- 根据 [MSC2285](https://github.com/matrix-org/matrix-spec-proposals/pull/2285)，使 `/read_markers` 上的 `m.fully_read` 可选。([#1216](https://github.com/matrix-org/matrix-spec/issues/1216))
- 根据 [MSC2285](https://github.com/matrix-org/matrix-spec-proposals/pull/2285)，允许从 `/receipts` 设置 `m.fully_read` 标记。([#1216](https://github.com/matrix-org/matrix-spec/issues/1216))
- 根据 [MSC3440](https://github.com/matrix-org/matrix-spec-proposals/pull/3440)、[MSC3816](https://github.com/matrix-org/matrix-spec-proposals/pull/3816)、[MSC3856](https://github.com/matrix-org/matrix-spec-proposals/pull/3856) 和 [MSC3715](https://github.com/matrix-org/matrix-spec-proposals/pull/3715)，通过 `m.thread` 关系添加线程。([#1254](https://github.com/matrix-org/matrix-spec/issues/1254))
- 根据 [MSC3771](https://github.com/matrix-org/matrix-spec-proposals/pull/3771) 和 [MSC3773](https://github.com/matrix-org/matrix-spec-proposals/pull/3773)，添加每个线程的通知和读取回执。([#1255](https://github.com/matrix-org/matrix-spec/issues/1255))
- 根据 [MSC3771](https://github.com/matrix-org/matrix-spec-proposals/pull/3771)，向 `/receipt` 端点添加 `thread_id`。([#1261](https://github.com/matrix-org/matrix-spec/issues/1261))

**规范澄清**

- 提到如果用户已被邀请到房间，`/rooms/{roomId}/invite` 端点将返回 200 响应。([#1084](https://github.com/matrix-org/matrix-spec/issues/1084))
- 修正整个规范中的各种拼写错误。([#1135](https://github.com/matrix-org/matrix-spec/issues/1135), [#1161](https://github.com/matrix-org/matrix-spec/issues/1161), [#1164](https://github.com/matrix-org/matrix-spec/issues/1164), [#1170](https://github.com/matrix-org/matrix-spec/issues/1170), [#1180](https://github.com/matrix-org/matrix-spec/issues/1180), [#1215](https://github.com/matrix-org/matrix-spec/issues/1215), [#1238](https://github.com/matrix-org/matrix-spec/issues/1238), [#1243](https://github.com/matrix-org/matrix-spec/issues/1243), [#1263](https://github.com/matrix-org/matrix-spec/issues/1263))
- 描述账户数据端点的返回代码，并澄清每个房间的数据不继承自全局数据。([#1155](https://github.com/matrix-org/matrix-spec/issues/1155))
- 澄清策略规则通配符的工作方式类似于 ACL 通配符。由 Nico 贡献。([#1165](https://github.com/matrix-org/matrix-spec/issues/1165))
- 澄清端到端加密模块中某些结构的格式。([#1166](https://github.com/matrix-org/matrix-spec/issues/1166))
- 为格式化规范中的对象定义添加 HTML 锚点。([#1174](https://github.com/matrix-org/matrix-spec/issues/1174))
- 调整从 OpenAPI 定义渲染的表格中 `<code>` 片段的样式。([#1179](https://github.com/matrix-org/matrix-spec/issues/1179))
- 更新“API 标准”部分以澄清 JSON 的使用方式。([#1185](https://github.com/matrix-org/matrix-spec/issues/1185))
- 澄清 `POST /_matrix/client/v3/login` 响应体中的“device_id”、“user_id”和“access_token”字段是必需的。([#1210](https://github.com/matrix-org/matrix-spec/issues/1210))
- 加强刷新访问令牌与事务 ID 的关系。([#1236](https://github.com/matrix-org/matrix-spec/issues/1236))
- 通过用逗号分隔可能的值来澄清枚举值。([#1240](https://github.com/matrix-org/matrix-spec/issues/1240))

### 服务器-服务器 API[](https://spec.matrix.org/v1.11/changelog/#server-server-api-7)

**向后兼容的更改**

- 根据 [MSC3771](https://github.com/matrix-org/matrix-spec-proposals/pull/3771) 和 [MSC3773](https://github.com/matrix-org/matrix-spec-proposals/pull/3773)，添加每个线程的通知和已读回执。([#1255](https://github.com/matrix-org/matrix-spec/issues/1255))

**规范澄清**

- 在格式化规范中为对象定义添加 HTML 锚点。([#1174](https://github.com/matrix-org/matrix-spec/issues/1174))
- 调整从 OpenAPI 定义渲染的表格中的 `<code>` 代码片段的样式。([#1179](https://github.com/matrix-org/matrix-spec/issues/1179))
- 更新“API 标准”部分以澄清 JSON 的使用方式。([#1185](https://github.com/matrix-org/matrix-spec/issues/1185))

### 应用服务 API[](https://spec.matrix.org/v1.11/changelog/#application-service-api-7)

**重大更改**

- 根据 [MSC2832](https://github.com/matrix-org/matrix-spec-proposals/pull/2832)，在与应用服务通信时，用 `Authorization` 头替代 `access_token` 的主机授权方式。([#1200](https://github.com/matrix-org/matrix-spec/issues/1200))

**规范澄清**

- 在格式化规范中为对象定义添加 HTML 锚点。([#1174](https://github.com/matrix-org/matrix-spec/issues/1174))

### 身份服务 API[](https://spec.matrix.org/v1.11/changelog/#identity-service-api-7)

**规范澄清**

- 在格式化规范中为对象定义添加 HTML 锚点。([#1174](https://github.com/matrix-org/matrix-spec/issues/1174))
- 更新“API 标准”部分以澄清 JSON 的使用方式。([#1185](https://github.com/matrix-org/matrix-spec/issues/1185))

### 推送网关 API[](https://spec.matrix.org/v1.11/changelog/#push-gateway-api-7)

**规范澄清**

- 在格式化规范中为对象定义添加 HTML 锚点。([#1174](https://github.com/matrix-org/matrix-spec/issues/1174))

### 房间版本[](https://spec.matrix.org/v1.11/changelog/#room-versions-7)

**规范澄清**

- 对于房间版本 1 到 10，澄清具有被拒绝的 `auth_events` 的事件必须被拒绝。([#1137](https://github.com/matrix-org/matrix-spec/issues/1137))
- 对于房间版本 2–10：纠正状态解析算法中的错误澄清。([#1158](https://github.com/matrix-org/matrix-spec/issues/1158))
- 对于房间版本 7 到 10：澄清 `invite->knock` 实际上是一个合法的转换。([#1175](https://github.com/matrix-org/matrix-spec/issues/1175))

### 附录[](https://spec.matrix.org/v1.11/changelog/#appendices-7)

没有重大更改。

### 内部更改/工具[](https://spec.matrix.org/v1.11/changelog/#internal-changestooling-7)

**向后兼容的更改**

- 添加内部更改日志部分。([#1194](https://github.com/matrix-org/matrix-spec/issues/1194))

**规范澄清**

- 为对象定义表格渲染 HTML 锚点。([#1191](https://github.com/matrix-org/matrix-spec/issues/1191))
- 为渲染数据部分添加背景和一些填充。([#1195](https://github.com/matrix-org/matrix-spec/issues/1195))
- 修复客户端-服务器 API 中短代码的渲染。([#1205](https://github.com/matrix-org/matrix-spec/issues/1205))
- 修复从 OpenAPI 规范生成的映射类型的间距。([#1230](https://github.com/matrix-org/matrix-spec/issues/1230))

## v1.3[](https://spec.matrix.org/v1.11/changelog/#v13)

|   |   |
|---|---|
|Git 提交|[https://github.com/matrix-org/matrix-spec/tree/v1.3](https://github.com/matrix-org/matrix-spec/tree/v1.3)|
|发布日期|2022年6月15日|

### 客户端-服务器 API[](https://spec.matrix.org/v1.11/changelog/#client-server-api-8)

**弃用**

- 弃用 `m.megolm.v1.aes-sha2` 事件中的 `sender_key` 和 `device_id`，以及 `m.room_key_request` 到设备消息中的 `sender_key`，根据 [MSC3700](https://github.com/matrix-org/matrix-spec-proposals/pull/3700)。([#1101](https://github.com/matrix-org/matrix-spec/issues/1101))

**向后兼容的更改**

- 根据 [MSC3567](https://github.com/matrix-org/matrix-spec-proposals/pull/3567)，在 `GET /_matrix/client/v3/messages` 上使 `from` 可选，以允许从房间历史的开始或结束请求事件。([#1002](https://github.com/matrix-org/matrix-spec/issues/1002))
- 添加刷新令牌，根据 [MSC2918](https://github.com/matrix-org/matrix-spec-proposals/pull/2918)。([#1056](https://github.com/matrix-org/matrix-spec/issues/1056), [#1113](https://github.com/matrix-org/matrix-spec/issues/1113))
- 放宽对富回复的限制，根据 [MSC3676](https://github.com/matrix-org/matrix-spec-proposals/pull/3676)。([#1062](https://github.com/matrix-org/matrix-spec/issues/1062))
- 描述事件关系的结构化系统，根据 [MSC2674](https://github.com/matrix-org/matrix-spec-proposals/pull/2674)。([#1062](https://github.com/matrix-org/matrix-spec/issues/1062))
- 描述事件之间的关系如何可以“聚合”，根据 [MSC2675](https://github.com/matrix-org/matrix-spec-proposals/pull/2675) 和 [MSC3666](https://github.com/matrix-org/matrix-spec-proposals/pull/3666)。([#1062](https://github.com/matrix-org/matrix-spec/issues/1062))
- 在支持的房间版本中添加新的 `knock_restricted` 加入规则，根据 [MSC3787](https://github.com/matrix-org/matrix-spec-proposals/pull/3787)。([#1099](https://github.com/matrix-org/matrix-spec/issues/1099))

**规范澄清**

- 澄清 `m.room.avatar` 事件中的 url 字段不是必需的。([#987](https://github.com/matrix-org/matrix-spec/issues/987))
- 澄清用户交互认证中的 `type` 可以省略。([#989](https://github.com/matrix-org/matrix-spec/issues/989))
- 调整 OpenAPI 规范，以便在渲染客户端-服务器 API 时显式定义 `Flow information` 类型。([#1003](https://github.com/matrix-org/matrix-spec/issues/1003))
- 更正 `m.room.power_levels` 事件中未指定的 `invite` 的默认值。([#1021](https://github.com/matrix-org/matrix-spec/issues/1021))
- 更新指向旧 `matrix-doc` GitHub 仓库的各种链接。([#1032](https://github.com/matrix-org/matrix-spec/issues/1032))
- 根据 [MSC3582](https://github.com/matrix-org/matrix-spec-proposals/pull/3582) 移除 `m.room.message.feedback`。([#1035](https://github.com/matrix-org/matrix-spec/issues/1035))
- 修复规范中的各种拼写错误。([#1051](https://github.com/matrix-org/matrix-spec/issues/1051), [#1054](https://github.com/matrix-org/matrix-spec/issues/1054), [#1059](https://github.com/matrix-org/matrix-spec/issues/1059), [#1081](https://github.com/matrix-org/matrix-spec/issues/1081), [#1097](https://github.com/matrix-org/matrix-spec/issues/1097), [#1110](https://github.com/matrix-org/matrix-spec/issues/1110), [#1115](https://github.com/matrix-org/matrix-spec/issues/1115), [#1126](https://github.com/matrix-org/matrix-spec/issues/1126), [#1127](https://github.com/matrix-org/matrix-spec/issues/1127), [#1128](https://github.com/matrix-org/matrix-spec/issues/1128), [#1129](https://github.com/matrix-org/matrix-spec/issues/1129), [#3681](https://github.com/matrix-org/matrix-spec-proposals/issues/3681), [#3708](https://github.com/matrix-org/matrix-spec-proposals/issues/3708))
- 澄清以 `@` 开头的状态键实际上是保留的。回归自 [#3658](https://github.com/matrix-org/matrix-spec-proposals/pull/3658)。([#1100](https://github.com/matrix-org/matrix-spec/issues/1100))
- 移除 `m.room.name` 事件中 `name` 字段的未强制大小限制。([#3669](https://github.com/matrix-org/matrix-spec-proposals/issues/3669))
- 从 `/sync` 的 `m.read`、`m.typing` 示例和房间账户数据中的 `m.fully_read` 示例中移除错误的 `room_id` 字段。([#3679](https://github.com/matrix-org/matrix-spec-proposals/issues/3679))
- 澄清推送规则条件中 `event_match` 的行为。([#3690](https://github.com/matrix-org/matrix-spec-proposals/issues/3690))
- 修正错误引用的 `m.login.appservice` 登录标识符，改为使用 `m.login.application_service`。([#3711](https://github.com/matrix-org/matrix-spec/issues/3711))
- 修复成员状态转换以表示 `invite->knock` 和 `external->leave` 是有效的转换。([#3730](https://github.com/matrix-org/matrix-spec/issues/3730))

### 服务器-服务器 API[](https://spec.matrix.org/v1.11/changelog/#server-server-api-8)

**向后兼容的更改**

- 根据 [MSC3383](https://github.com/matrix-org/matrix-spec-proposals/pull/3383)，在授权头中添加 `destination` 属性。([#1067](https://github.com/matrix-org/matrix-spec/issues/1067))

**规范澄清**

- 从 PDU 中移除大部分未使用的 `origin` 字段。([#998](https://github.com/matrix-org/matrix-spec/issues/998))
- 更新指向旧 `matrix-doc` GitHub 仓库的各种链接。([#1032](https://github.com/matrix-org/matrix-spec/issues/1032))
- 澄清授权头的格式。([#1038](https://github.com/matrix-org/matrix-spec/issues/1038), [#1067](https://github.com/matrix-org/matrix-spec/issues/1067))
- 澄清在对接收到的 PDU 进行检查时“有效事件”的含义。([#1045](https://github.com/matrix-org/matrix-spec/issues/1045))
- 澄清 `valid_until_ts` 以毫秒为单位，与 Matrix 中使用的其他时间戳一致。([#1055](https://github.com/matrix-org/matrix-spec/issues/1055))
- 澄清对 PDU 的检查应参考事件之前的状态。([#1070](https://github.com/matrix-org/matrix-spec/issues/1070))
- 澄清非整数权限级别的历史处理。([#1099](https://github.com/matrix-org/matrix-spec/issues/1099))
- 修复规范中的各种拼写错误。([#1110](https://github.com/matrix-org/matrix-spec/issues/1110))
- 更正 `/send_join` 响应的误导性文本。([#3703](https://github.com/matrix-org/matrix-spec-proposals/issues/3703))
- 澄清 `X-Matrix` 签名验证的 `content` 是解析后的 JSON 主体。([#3727](https://github.com/matrix-org/matrix-spec-proposals/issues/3727))

### 应用服务 API[](https://spec.matrix.org/v1.11/changelog/#application-service-api-8)

**向后兼容的更改**

- 根据 [MSC3316](https://github.com/matrix-org/matrix-spec-proposals/pull/3316)，添加时间戳调整。([#1094](https://github.com/matrix-org/matrix-spec/issues/1094))

### 身份服务 API[](https://spec.matrix.org/v1.11/changelog/#identity-service-api-8)

没有重大更改。

### 推送网关 API[](https://spec.matrix.org/v1.11/changelog/#push-gateway-api-8)

没有重大更改。

### 房间版本[](https://spec.matrix.org/v1.11/changelog/#room-versions-8)

**向后兼容的更改**

- 根据 [MSC3604](https://github.com/matrix-org/matrix-spec-proposals/pull/3604)，添加房间版本 10。([#1099](https://github.com/matrix-org/matrix-spec/issues/1099))
- 根据 [MSC3667](https://github.com/matrix-org/matrix-spec-proposals/pull/3667)，在房间版本 10 中强制执行整数权限级别。([#1099](https://github.com/matrix-org/matrix-spec/issues/1099))
- 根据 [MSC3787](https://github.com/matrix-org/matrix-spec-proposals/pull/3787)，在房间版本 10 中添加支持的 `knock_restricted` 加入规则。([#1099](https://github.com/matrix-org/matrix-spec/issues/1099))
- 根据 [MSC3589](https://github.com/matrix-org/matrix-spec-proposals/pull/3589)，将默认房间版本更新为 9。([#3739](https://github.com/matrix-org/matrix-spec-proposals/issues/3739))

**规范澄清**

- 改善状态解析算法的可读性和理解。([#1037](https://github.com/matrix-org/matrix-spec/issues/1037), [#1042](https://github.com/matrix-org/matrix-spec/issues/1042), [#1043](https://github.com/matrix-org/matrix-spec/issues/1043), [#1120](https://github.com/matrix-org/matrix-spec/issues/1120))
- 改善授权规则的可读性。([#1050](https://github.com/matrix-org/matrix-spec/issues/1050))
- 对于房间版本 8、9 和 10：澄清哪个主机服务器需要签署加入事件。([#1093](https://github.com/matrix-org/matrix-spec/issues/1093))
- 澄清房间版本 1 到 9 接受字符串形式的权限级别，如 [MSC3667](https://github.com/matrix-org/matrix-spec-proposals/pull/3667) 所述。([#1099](https://github.com/matrix-org/matrix-spec/issues/1099))
- 对于所有房间版本：在授权规则中添加 `m.federate`，如最初所计划。([#1103](https://github.com/matrix-org/matrix-spec/issues/1103))
- 对于房间版本 2 到 10：更明确地定义权限事件的主线和其他事件的主线排序。([#1107](https://github.com/matrix-org/matrix-spec/issues/1107))
- 对于房间版本 7、8、9 和 10：修复当 `join_rule` 为 `knock` 时的加入成员授权规则。([#3737](https://github.com/matrix-org/matrix-spec-proposals/issues/3737))

### 附录[](https://spec.matrix.org/v1.11/changelog/#appendices-8)

没有重大更改。

## v1.2[](https://spec.matrix.org/v1.11/changelog/#v12)

|   |   |
|---|---|
|Git 提交|[https://github.com/matrix-org/matrix-doc/tree/v1.2](https://github.com/matrix-org/matrix-doc/tree/v1.2)|
|发布日期|2022年2月2日|

### 客户端-服务器 API[](https://spec.matrix.org/v1.11/changelog/#client-server-api-9)

**重大更改**

- 根据 [MSC3442](https://github.com/matrix-org/matrix-doc/pull/3442)，`prev_content` 字段现在返回在事件的 `unsigned` 属性内，而不是在顶层。([#3524](https://github.com/matrix-org/matrix-doc/issues/3524))
- 根据 [MSC2432](https://github.com/matrix-org/matrix-doc/pull/2432)，从 `/publicRooms` 返回的块中移除 `aliases` 属性。([#3624](https://github.com/matrix-org/matrix-doc/issues/3624))

**新端点**

- 根据 [MSC2946](https://github.com/matrix-org/matrix-doc/pull/2946)，添加空间层次结构 API (`GET /_matrix/client/v1/rooms/{roomId}/hierarchy`)。([#3610](https://github.com/matrix-org/matrix-doc/issues/3610))
- 根据 [MSC3231](https://github.com/matrix-org/matrix-doc/pull/3231)，添加 `/_matrix/client/v1/register/m.login.registration_token/validity`。([#3616](https://github.com/matrix-org/matrix-doc/issues/3616))

**向后兼容的更改**

- 根据 [MSC2778](https://github.com/matrix-org/matrix-doc/pull/2778)，扩展 `/_matrix/client/r0/login` 以接受 `m.login.appservice`。([#3324](https://github.com/matrix-org/matrix-doc/issues/3324))
- 根据 [MSC3083](https://github.com/matrix-org/matrix-doc/pull/3083)、[MSC3289](https://github.com/matrix-org/matrix-doc/pull/3289) 和 [MSC3375](https://github.com/matrix-org/matrix-doc/pull/3375)，添加对 `restricted` 房间的支持。([#3387](https://github.com/matrix-org/matrix-doc/issues/3387))
- 根据 [MSC3069](https://github.com/matrix-org/matrix-doc/pull/3069)，在 `/account/whoami` 中添加 `is_guest`。([#3605](https://github.com/matrix-org/matrix-doc/issues/3605))
- 根据 [MSC3419](https://github.com/matrix-org/matrix-doc/pull/3419)，扩展访客访问以发送任何房间事件和状态事件。([#3605](https://github.com/matrix-org/matrix-doc/issues/3605))
- 根据 [MSC1772](https://github.com/matrix-org/matrix-doc/pull/1772) 和 [MSC2946](https://github.com/matrix-org/matrix-doc/pull/2946)，添加空间和房间类型。([#3610](https://github.com/matrix-org/matrix-doc/issues/3610))
- 根据 [MSC3283](https://github.com/matrix-org/matrix-doc/pull/3283)，添加新的 `m.set_displayname`、`m.set_avatar_url` 和 `m.3pid_changes` 功能。([#3614](https://github.com/matrix-org/matrix-doc/issues/3614))
- 根据 [MSC2732](https://github.com/matrix-org/matrix-doc/pull/2732)，添加对备用密钥（一次性密钥用完时使用的可选密钥）的支持。([#3615](https://github.com/matrix-org/matrix-doc/issues/3615))
- 根据 [MSC3231](https://github.com/matrix-org/matrix-doc/pull/3231)，添加令牌认证注册支持。([#3616](https://github.com/matrix-org/matrix-doc/issues/3616))

**规范澄清**

- 使 `AesHmacSha2KeyDescription` 与 `KeyDescription` 一致，将 `name` 标记为可选。([#3481](https://github.com/matrix-org/matrix-doc/issues/3481))
- 修复规范中的各种拼写错误。([#3482](https://github.com/matrix-org/matrix-doc/issues/3482), [#3495](https://github.com/matrix-org/matrix-doc/issues/3495), [#3509](https://github.com/matrix-org/matrix-doc/issues/3509), [#3535](https://github.com/matrix-org/matrix-doc/issues/3535), [#3591](https://github.com/matrix-org/matrix-doc/issues/3591), [#3601](https://github.com/matrix-org/matrix-doc/issues/3601), [#3611](https://github.com/matrix-org/matrix-doc/issues/3611), [#3671](https://github.com/matrix-org/matrix-doc/issues/3671), [#3680](https://github.com/matrix-org/matrix-doc/issues/3680))
- 在 `m.location` 事件的定义中明确提到 RFC5870 ([#3492](https://github.com/matrix-org/matrix-doc/issues/3492))
- 根据 [MSC3550](https://github.com/matrix-org/matrix-doc/pull/3550)，在 `/profile/{userId}` 中添加 `403 M_FORBIDDEN` 错误代码。([#3530](https://github.com/matrix-org/matrix-doc/issues/3530))
- 澄清 `/sync` API 的描述，包括修复 ASCII 艺术图。([#3543](https://github.com/matrix-org/matrix-doc/issues/3543))
- 澄清客户端 `well_known` 中的 `base_url` 可能包含或不包含尾随斜杠。([#3562](https://github.com/matrix-org/matrix-doc/issues/3562))
- 澄清解密 `m.olm.v1.curve25519-aes-sha2` 消息时要检查哪个签名。([#3573](https://github.com/matrix-org/matrix-doc/issues/3573))
- 澄清“剥离状态”的含义及其用途，根据 [MSC3173](https://github.com/matrix-org/matrix-doc/pull/3173)。([#3606](https://github.com/matrix-org/matrix-doc/issues/3606))
- 澄清如何解释缺失的一次性密钥计数。([#3636](https://github.com/matrix-org/matrix-doc/issues/3636))
- 更正各种 API 端点响应的架构。([#3650](https://github.com/matrix-org/matrix-doc/issues/3650))
- 澄清群组提及不再在规范中。([#3652](https://github.com/matrix-org/matrix-doc/issues/3652))
- 区分“联邦”事件格式（由联邦 API 交换）和“客户端”事件格式（在客户端-服务器和 AS API 中使用）。([#3658](https://github.com/matrix-org/matrix-doc/issues/3658))
- 修复各种 API 端点响应的渲染。([#3674](https://github.com/matrix-org/matrix-doc/issues/3674))

### 服务器-服务器 API[](https://spec.matrix.org/v1.11/changelog/#server-server-api-9)

**新端点**

- 根据 [MSC2946](https://github.com/matrix-org/matrix-doc/pull/2946)，添加空间层次结构 API (`GET /_matrix/federation/v1/hierarchy/{roomId}`)。([#3610](https://github.com/matrix-org/matrix-doc/issues/3610), [#3660](https://github.com/matrix-org/matrix-doc/issues/3660))

**向后兼容的更改**

- 根据 [MSC3083](https://github.com/matrix-org/matrix-doc/pull/3083)、[MSC3289](https://github.com/matrix-org/matrix-doc/pull/3289) 和 [MSC3375](https://github.com/matrix-org/matrix-doc/pull/3375)，添加对 `restricted` 房间的支持。([#3387](https://github.com/matrix-org/matrix-doc/issues/3387))

**规范澄清**

- 修复规范中的各种拼写错误。([#3527](https://github.com/matrix-org/matrix-doc/issues/3527), [#3528](https://github.com/matrix-org/matrix-doc/issues/3528))
- 澄清 `GET /_matrix/federation/v1/event_auth/{roomId}/{eventId}` 不返回房间完整状态的认证链。([#3583](https://github.com/matrix-org/matrix-doc/issues/3583))
- 修复各种 API 端点响应的渲染。([#3674](https://github.com/matrix-org/matrix-doc/issues/3674))

### 应用服务 API[](https://spec.matrix.org/v1.11/changelog/#application-service-api-9)

**规范澄清**

- 区分“联邦”事件格式（由联邦 API 交换）和“客户端”事件格式（在客户端-服务器和 AS API 中使用）。([#3658](https://github.com/matrix-org/matrix-doc/issues/3658))
- 修复各种 API 端点响应的渲染。([#3674](https://github.com/matrix-org/matrix-doc/issues/3674))
- 更正 `GET /_matrix/app/v1/thirdparty/protocol/{protocol}` 的响应值文档。([#3675](https://github.com/matrix-org/matrix-doc/issues/3675))

### 身份服务 API[](https://spec.matrix.org/v1.11/changelog/#identity-service-api-9)

**向后兼容的更改**

- 根据 [MSC3288](https://github.com/matrix-org/matrix-doc/pull/3288)，在存储的邀请中添加 `room_type`。([#3610](https://github.com/matrix-org/matrix-doc/issues/3610))

**规范澄清**

- 修复各种 API 端点响应的渲染。([#3674](https://github.com/matrix-org/matrix-doc/issues/3674))

### 推送网关 API[](https://spec.matrix.org/v1.11/changelog/#push-gateway-api-9)

**规范澄清**

- 修复各种 API 端点响应的渲染。([#3674](https://github.com/matrix-org/matrix-doc/issues/3674))

### 房间版本[](https://spec.matrix.org/v1.11/changelog/#room-versions-9)

**向后兼容的更改**

- 根据 [MSC3289](https://github.com/matrix-org/matrix-doc/pull/3289)，添加房间版本 8。([#3387](https://github.com/matrix-org/matrix-doc/issues/3387))
- 根据 [MSC3375](https://github.com/matrix-org/matrix-doc/pull/3375)，添加房间版本 9。([#3387](https://github.com/matrix-org/matrix-doc/issues/3387))

**规范澄清**

- 完全指定房间版本以指明从父版本继承的内容。([#3432](https://github.com/matrix-org/matrix-doc/issues/3432), [#3661](https://github.com/matrix-org/matrix-doc/issues/3661))
- 澄清事件 ID 和事件格式部分。([#3501](https://github.com/matrix-org/matrix-doc/issues/3501))
- 移除一些错误显示为联邦 PDU `unsigned` 数据一部分的字段。([#3522](https://github.com/matrix-org/matrix-doc/issues/3522))
- 修复房间版本规范的标题顺序以保持一致。([#3683](https://github.com/matrix-org/matrix-doc/issues/3683))
- 在房间版本 6 中添加缺失的“签名密钥有效期”部分。([#3683](https://github.com/matrix-org/matrix-doc/issues/3683))
- 修复 v7、v8 和 v9 中 `knock` -> `leave` 的成员身份授权规则。([#3694](https://github.com/matrix-org/matrix-doc/issues/3694))

### 附录[](https://spec.matrix.org/v1.11/changelog/#appendices-9)

**向后兼容的更改**

- 根据 [MSC2758](https://github.com/matrix-org/matrix-doc/pull/2758)，描述“通用命名空间标识符语法”。([#3171](https://github.com/matrix-org/matrix-doc/issues/3171))
- 根据 [MSC2312](https://github.com/matrix-org/matrix-doc/pull/2312)，描述 `matrix:` URI 方案。([#3608](https://github.com/matrix-org/matrix-doc/issues/3608))

## v1.1[](https://spec.matrix.org/v1.11/changelog/#v11)

|   |   |
|---|---|
|Git 提交|[https://github.com/matrix-org/matrix-doc/tree/v1.1](https://github.com/matrix-org/matrix-doc/tree/v1.1)|
|发布日期|2021年11月9日|

### 客户端-服务器 API[](https://spec.matrix.org/v1.11/changelog/#client-server-api-10)

**重大更改**

- 根据 [MSC2630](https://github.com/matrix-org/matrix-doc/pull/2630)，记录 `curve25519-hkdf-sha256` 密钥协商方法用于 SAS 验证，并弃用旧方法。([#2687](https://github.com/matrix-org/matrix-doc/issues/2687))
- 根据 [MSC2366](https://github.com/matrix-org/matrix-doc/pull/2366)，在密钥验证框架中添加 `m.key.verification.ready` 和 `m.key.verification.done`。([#3139](https://github.com/matrix-org/matrix-doc/issues/3139))

**弃用**

- 根据 [MSC3122](https://github.com/matrix-org/matrix-doc/pull/3122)，弃用不以 `m.key.verification.request` 开始的验证。([#3199](https://github.com/matrix-org/matrix-doc/issues/3199))

**新端点**

- 根据 [MSC1219](https://github.com/matrix-org/matrix-doc/pull/1219)，添加密钥备份 (`/room_keys/*`) 端点。([#2387](https://github.com/matrix-org/matrix-doc/issues/2387), [#2639](https://github.com/matrix-org/matrix-doc/issues/2639))
- 根据 [MSC1756](https://github.com/matrix-org/matrix-doc/pull/1756)，添加 `POST /keys/device_signing/upload` 和 `POST /keys/signatures/upload`。([#2536](https://github.com/matrix-org/matrix-doc/issues/2536))
- 根据 [MSC2403](https://github.com/matrix-org/matrix-doc/pull/2403)，添加 `/knock` 端点。([#3154](https://github.com/matrix-org/matrix-doc/issues/3154))
- 根据 [MSC2858](https://github.com/matrix-org/matrix-doc/pull/2858)，添加 `/login/sso/redirect/{idpId}`。([#3163](https://github.com/matrix-org/matrix-doc/issues/3163))

**移除的端点**

- 根据 [MSC2610](https://github.com/matrix-org/matrix-doc/pull/2610) 和 [MSC2611](https://github.com/matrix-org/matrix-doc/pull/2611)，移除未实现的 `m.login.oauth2` 和 `m.login.token` 用户交互认证机制。([#2609](https://github.com/matrix-org/matrix-doc/issues/2609))

**向后兼容的更改**

- 根据 [MSC2399](https://github.com/matrix-org/matrix-doc/pull/2399)，记录客户端如何建议接收者其正在扣留解密密钥。([#2399](https://github.com/matrix-org/matrix-doc/issues/2399))
- 根据 [MSC1756](https://github.com/matrix-org/matrix-doc/pull/1756)，在 `POST /keys/query` 的响应中添加交叉签名属性。([#2536](https://github.com/matrix-org/matrix-doc/issues/2536))
- 根据 [MSC1946](https://github.com/matrix-org/matrix-doc/pull/1946) 和 [MSC2472](https://github.com/matrix-org/matrix-doc/pull/2472)，记录安全秘密存储和共享。([#2597](https://github.com/matrix-org/matrix-doc/issues/2597))
- 根据 [MSC2604](https://github.com/matrix-org/matrix-doc/pull/2604)，在登录回退中添加 `device_id` 参数。([#2709](https://github.com/matrix-org/matrix-doc/issues/2709))
- 添加一组通用的 SAS 表情符号翻译。([#2728](https://github.com/matrix-org/matrix-doc/issues/2728))
- 根据 [MSC2367](https://github.com/matrix-org/matrix-doc/pull/2367)，在所有成员事件和相关端点中添加对 `reason` 的支持。([#2795](https://github.com/matrix-org/matrix-doc/issues/2795))
- 根据 [MSC2663](https://github.com/matrix-org/matrix-doc/pull/2663)，在推送规则端点中添加 404 `M_NOT_FOUND` 错误。([#2796](https://github.com/matrix-org/matrix-doc/issues/2796))
- 根据 [MSC2414](https://github.com/matrix-org/matrix-doc/pull/2414)，在内容报告 API 中使 `reason` 和 `score` 参数可选。([#2807](https://github.com/matrix-org/matrix-doc/issues/2807))
- 根据 [MSC2689](https://github.com/matrix-org/matrix-doc/pull/2689)，允许访客获取房间成员列表。([#2808](https://github.com/matrix-org/matrix-doc/issues/2808))
- 根据 [MSC2010](https://github.com/matrix-org/matrix-doc/pull/2010) 和 [MSC2557](https://github.com/matrix-org/matrix-doc/pull/2557)，添加对剧透的支持，并根据 [MSC2422](https://github.com/matrix-org/matrix-doc/pull/2422) 添加 `color` 属性。([#3098](https://github.com/matrix-org/matrix-doc/issues/3098))
- 根据 [MSC2184](https://github.com/matrix-org/matrix-doc/pull/2184)，在建议的 HTML 子集中添加 `<details>` 和 `<summary>`。([#3100](https://github.com/matrix-org/matrix-doc/issues/3100))
- 根据 [MSC2241](https://github.com/matrix-org/matrix-doc/pull/2241)，添加使用房间内消息的密钥验证。([#3139](https://github.com/matrix-org/matrix-doc/issues/3139), [#3150](https://github.com/matrix-org/matrix-doc/issues/3150))
- 添加关于使用 SSSS 进行交叉签名和密钥备份的信息。([#3147](https://github.com/matrix-org/matrix-doc/issues/3147))
- 根据 [MSC1544](https://github.com/matrix-org/matrix-doc/pull/1544)，添加使用二维码的密钥验证方法。([#3149](https://github.com/matrix-org/matrix-doc/issues/3149))
- 根据 [MSC2874](https://github.com/matrix-org/matrix-doc/pull/2874)，记录客户端如何简化安全秘密存储的使用。([#3151](https://github.com/matrix-org/matrix-doc/issues/3151))
- 根据 [MSC2403](https://github.com/matrix-org/matrix-doc/pull/2403)，添加对敲门的支持。([#3154](https://github.com/matrix-org/matrix-doc/issues/3154), [#3254](https://github.com/matrix-org/matrix-doc/issues/3254))
- 根据 [MSC2858](https://github.com/matrix-org/matrix-doc/pull/2858)，通过 `m.login.sso` 支持多个 SSO 提供商。([#3163](https://github.com/matrix-org/matrix-doc/issues/3163))
- 根据 [MSC2033](https://github.com/matrix-org/matrix-doc/pull/2033)，在 `/account/whoami` 响应中添加 `device_id`。([#3166](https://github.com/matrix-org/matrix-doc/issues/3166))
- 根据 [MSC2284](https://github.com/matrix-org/matrix-doc/pull/2284)，将身份服务器发现失败降级为 `FAIL_PROMPT`。([#3169](https://github.com/matrix-org/matrix-doc/issues/3169))
- 根据 [MSC2844](https://github.com/matrix-org/matrix-doc/pull/2844)，将所有端点重新版本化为 `v3` 作为起始点而不是 `r0`。([#3421](https://github.com/matrix-org/matrix-doc/issues/3421))

**规范澄清**

- 修复 `age` 和 `unsigned` 显示在错误位置的问题。([#2591](https://github.com/matrix-org/matrix-doc/issues/2591))
- 修复房间版本功能的定义。([#2592](https://github.com/matrix-org/matrix-doc/issues/2592))
- 修复规范中的各种拼写错误。([#2594](https://github.com/matrix-org/matrix-doc/issues/2594), [#2599](https://github.com/matrix-org/matrix-doc/issues/2599), [#2809](https://github.com/matrix-org/matrix-doc/issues/2809), [#2878](https://github.com/matrix-org/matrix-doc/issues/2878), [#2885](https://github.com/matrix-org/matrix-doc/issues/2885), [#2888](https://github.com/matrix-org/matrix-doc/issues/2888), [#3116](https://github.com/matrix-org/matrix-doc/issues/3116), [#3339](https://github.com/matrix-org/matrix-doc/issues/3339))
- 澄清 OpenID Connect 规范的链接。([#2605](https://github.com/matrix-org/matrix-doc/issues/2605))
- 澄清 SSO 登录和 UI-Auth 的行为。([#2608](https://github.com/matrix-org/matrix-doc/issues/2608))
- 从 `/sync` 示例中移除多余的 `room_id`。([#2629](https://github.com/matrix-org/matrix-doc/issues/2629))
- 为了清晰，重新组织推送通知模块中的信息。([#2634](https://github.com/matrix-org/matrix-doc/issues/2634))
- 改善事件架构 `title` 的一致性和清晰度。([#2647](https://github.com/matrix-org/matrix-doc/issues/2647))
- 修复 `m.key.verification.accept` 和秘密存储中的架构问题。([#2653](https://github.com/matrix-org/matrix-doc/issues/2653))
- 将“UI 授权”重新表述为“用户交互认证”以更清晰。([#2667](https://github.com/matrix-org/matrix-doc/issues/2667))
- 修复推送规则动作的架构以表示其替代的对象形式。([#2669](https://github.com/matrix-org/matrix-doc/issues/2669))
- 为了一致性，修复 `highlight` 调整的使用。([#2670](https://github.com/matrix-org/matrix-doc/issues/2670))
- 澄清 `/sync` 的 `state` 在懒加载时的行为。([#2754](https://github.com/matrix-org/matrix-doc/issues/2754))
- 澄清 `m.room.redaction` 事件的描述。([#2814](https://github.com/matrix-org/matrix-doc/issues/2814))
- 在 `PUT /_matrix/client/r0/sendToDevice/{eventType}/{txnId}` 调用中将 `messages` 标记为必需的 JSON 主体字段。([#2928](https://github.com/matrix-org/matrix-doc/issues/2928))
- 更正 `client_secret` 请求主体参数的示例，以便不包含无效字符。([#2985](https://github.com/matrix-org/matrix-doc/issues/2985))
- 修复 `m.presence` 的示例 MXC URI。([#3091](https://github.com/matrix-org/matrix-doc/issues/3091))
- 澄清事件主体是不可信的，根据 [MSC2801](https://github.com/matrix-org/matrix-doc/pull/2801)。([#3099](https://github.com/matrix-org/matrix-doc/issues/3099))
- 修复最大事件大小限制（65535 字节 -> 65536）。([#3127](https://github.com/matrix-org/matrix-doc/issues/3127))
- 更新 `Access-Control-Allow-Headers` 建议以符合 CORS 规范。([#3225](https://github.com/matrix-org/matrix-doc/issues/3225))
- 明确指出 `replacement_room` 是 `m.room.tombstone` 事件中的房间 ID。([#3233](https://github.com/matrix-org/matrix-doc/issues/3233))
- 澄清所有请求主体都是必需的。([#3238](https://github.com/matrix-org/matrix-doc/issues/3238), [#3332](https://github.com/matrix-org/matrix-doc/issues/3332))
- 为一些架构添加缺失的标题。([#3330](https://github.com/matrix-org/matrix-doc/issues/3330))
- 根据 [MSC1756](https://github.com/matrix-org/matrix-doc/pull/1756)，在交叉签名 API 中添加用户交互认证字段。([#3331](https://github.com/matrix-org/matrix-doc/issues/3331))
- 提到在创建带别名的房间时应添加规范别名事件。([#3337](https://github.com/matrix-org/matrix-doc/issues/3337))
- 在附录中添加“API 约定”部分。([#3350](https://github.com/matrix-org/matrix-doc/issues/3350))
- 澄清 `/sync`、`/rooms/{room_id}/messages`、`/initialSync`、`/rooms/{room_id}/initialSync` 和 `/notifications` 使用的分页令牌的文档。([#3353](https://github.com/matrix-org/matrix-doc/issues/3353))
- 移除不准确的“分页”部分。([#3366](https://github.com/matrix-org/matrix-doc/issues/3366))
- 澄清 `redacted_because` 的工作方式。([#3411](https://github.com/matrix-org/matrix-doc/issues/3411))
- 根据 [MSC2582](https://github.com/matrix-org/matrix-doc/pull/2582)，从 `EncryptedFile` 示例中移除多余的 `mimetype`。([#3412](https://github.com/matrix-org/matrix-doc/issues/3412))
- 描述 [MSC2844](https://github.com/matrix-org/matrix-doc/pull/2844) 如何影响 `/versions` 端点。([#3420](https://github.com/matrix-org/matrix-doc/issues/3420))
- 修复 `threepid_creds` 周围的文档错误。([#3471](https://github.com/matrix-org/matrix-doc/issues/3471))

### 服务器-服务器 API[](https://spec.matrix.org/v1.11/changelog/#server-server-api-10)

**新端点**

- 根据 [MSC2403](https://github.com/matrix-org/matrix-doc/pull/2403)，添加 `/make_knock` 和 `/send_knock` 端点。([#3154](https://github.com/matrix-org/matrix-doc/issues/3154))

**向后兼容的更改**

- 根据 [MSC1756](https://github.com/matrix-org/matrix-doc/pull/1756)，在 `GET /user/keys` 和 `GET /user/devices/{userId}`、`m.device_list_update` EDU 中添加交叉签名信息，以及一个新的 `m.signing_key_update` EDU。([#2536](https://github.com/matrix-org/matrix-doc/issues/2536))
- 根据 [MSC2403](https://github.com/matrix-org/matrix-doc/pull/2403)，添加对敲门的支持。([#3154](https://github.com/matrix-org/matrix-doc/issues/3154))

**规范澄清**

- 指定 `GET /_matrix/federation/v1/make_join/{roomId}/{userId}` 可以返回 404 如果房间未知。([#2688](https://github.com/matrix-org/matrix-doc/issues/2688))
- 修复规范中的各种拼写错误。([#2888](https://github.com/matrix-org/matrix-doc/issues/2888), [#3116](https://github.com/matrix-org/matrix-doc/issues/3116), [#3128](https://github.com/matrix-org/matrix-doc/issues/3128), [#3207](https://github.com/matrix-org/matrix-doc/issues/3207))
- 更正 `/_matrix/federation/v1/user/devices/{userId}` 响应实际上返回 `"self_signing_key"` 而不是 `"self_signing_keys"`。([#3312](https://github.com/matrix-org/matrix-doc/issues/3312))
- 解释为什么需要 `<hostname>` TLS 证书而不是 `<delegated_hostname>` 用于 SRV 委派。([#3322](https://github.com/matrix-org/matrix-doc/issues/3322))
- 调整示例 PDU 图以更好地展示具有多个 `prev_events` 的情况。([#3340](https://github.com/matrix-org/matrix-doc/issues/3340))

### 应用服务 API[](https://spec.matrix.org/v1.11/changelog/#application-service-api-10)

**规范澄清**

- 修复规范中的各种拼写错误。([#2888](https://github.com/matrix-org/matrix-doc/issues/2888))

### 身份服务 API[](https://spec.matrix.org/v1.11/changelog/#identity-service-api-10)

**新端点**

- 根据 [MSC2320](https://github.com/matrix-org/matrix-doc/pull/2320)，添加 `GET /_matrix/identity/versions` API。([#3101](https://github.com/matrix-org/matrix-doc/issues/3101))

**移除的端点**

- 根据 [MSC2713](https://github.com/matrix-org/matrix-doc/pull/2713)，v1 身份服务 API 已被移除，取而代之的是 v2 API。([#3170](https://github.com/matrix-org/matrix-doc/issues/3170))

**规范澄清**

- 修复规范中的各种拼写错误。([#2888](https://github.com/matrix-org/matrix-doc/issues/2888))
- 根据 [MSC2265](https://github.com/matrix-org/matrix-doc/pull/2265)，澄清某些标识符在处理前必须进行大小写折叠。([#3167](https://github.com/matrix-org/matrix-doc/issues/3167), [#3176](https://github.com/matrix-org/matrix-doc/issues/3176))
- 描述 [MSC2844](https://github.com/matrix-org/matrix-doc/pull/2844) 如何影响 `/versions` 端点。([#3459](https://github.com/matrix-org/matrix-doc/issues/3459))

### 推送网关 API[](https://spec.matrix.org/v1.11/changelog/#push-gateway-api-10)

**规范澄清**

- 澄清从哪里获取通知端点的各种参数值的信息。([#2763](https://github.com/matrix-org/matrix-doc/issues/2763))

## 历史版本[](https://spec.matrix.org/v1.11/changelog/#historical-versions)

在版本 1.1 之前，版本控制应用于单个 API 规范的级别。此部分包括这些 API 版本的链接。

- **客户端-服务器 API**
    
    - [r0.6.1](https://matrix.org/docs/spec/client_server/r0.6.1.html)
    - [r0.6.0](https://matrix.org/docs/spec/client_server/r0.6.0.html)
    - [r0.5.0](https://matrix.org/docs/spec/client_server/r0.5.0.html)
    - [r0.4.0](https://matrix.org/docs/spec/client_server/r0.4.0.html)
    - [r0.3.0](https://matrix.org/docs/spec/client_server/r0.3.0.html)
    - [r0.2.0](https://matrix.org/docs/spec/client_server/r0.2.0.html)
    - [r0.1.0](https://matrix.org/docs/spec/client_server/r0.1.0.html)
    - [r0.0.1](https://matrix.org/docs/spec/r0.0.1/client_server.html)
    - [r0.0.0](https://matrix.org/docs/spec/r0.0.0/client_server.html)
    - [遗留](https://matrix.org/docs/spec/legacy/#client-server-api)：在规范正式发布为版本 r0.0.0 之前的最后一个草案。
- **服务器-服务器 API**
    
    - [r0.1.4](https://matrix.org/docs/spec/server_server/r0.1.4.html)
    - [r0.1.3](https://matrix.org/docs/spec/server_server/r0.1.3.html)
    - [r0.1.2](https://matrix.org/docs/spec/server_server/r0.1.2.html)
    - [r0.1.1](https://matrix.org/docs/spec/server_server/r0.1.1.html)
    - [r0.1.0](https://matrix.org/docs/spec/server_server/r0.1.0.html)
- **应用服务 API**
    
    - [r0.1.1](https://matrix.org/docs/spec/application_service/r0.1.1.html)
    - [r0.1.0](https://matrix.org/docs/spec/application_service/r0.1.0.html)
- **身份服务 API**
    
    - [r0.3.0](https://matrix.org/docs/spec/identity_service/r0.3.0.html)
    - [r0.2.1](https://matrix.org/docs/spec/identity_service/r0.2.1.html)
    - [r0.2.0](https://matrix.org/docs/spec/identity_service/r0.2.0.html)
    - [r0.1.0](https://matrix.org/docs/spec/identity_service/r0.1.0.html)
- **推送网关 API**
    
    - [r0.1.0](https://matrix.org/docs/spec/push_gateway/r0.1.0.html)